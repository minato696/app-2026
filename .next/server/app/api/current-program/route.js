/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/current-program/route";
exports.ids = ["app/api/current-program/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcurrent-program%2Froute&page=%2Fapi%2Fcurrent-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcurrent-program%2Froute.ts&appDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcurrent-program%2Froute&page=%2Fapi%2Fcurrent-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcurrent-program%2Froute.ts&appDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_USUARIO_Desktop_APP_EXITOSA2026_src_app_api_current_program_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/current-program/route.ts */ \"(rsc)/./src/app/api/current-program/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/current-program/route\",\n        pathname: \"/api/current-program\",\n        filename: \"route\",\n        bundlePath: \"app/api/current-program/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\USUARIO\\\\Desktop\\\\APP-EXITOSA2026\\\\src\\\\app\\\\api\\\\current-program\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_USUARIO_Desktop_APP_EXITOSA2026_src_app_api_current_program_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjdXJyZW50LXByb2dyYW0lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmN1cnJlbnQtcHJvZ3JhbSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmN1cnJlbnQtcHJvZ3JhbSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVU1VBUklPJTVDRGVza3RvcCU1Q0FQUC1FWElUT1NBMjAyNiU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDVVNVQVJJTyU1Q0Rlc2t0b3AlNUNBUFAtRVhJVE9TQTIwMjYmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxVU1VBUklPXFxcXERlc2t0b3BcXFxcQVBQLUVYSVRPU0EyMDI2XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGN1cnJlbnQtcHJvZ3JhbVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY3VycmVudC1wcm9ncmFtL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY3VycmVudC1wcm9ncmFtXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jdXJyZW50LXByb2dyYW0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxVU1VBUklPXFxcXERlc2t0b3BcXFxcQVBQLUVYSVRPU0EyMDI2XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGN1cnJlbnQtcHJvZ3JhbVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcurrent-program%2Froute&page=%2Fapi%2Fcurrent-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcurrent-program%2Froute.ts&appDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/current-program/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/current-program/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_dataManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/dataManager */ \"(rsc)/./src/lib/dataManager.ts\");\n/* harmony import */ var _lib_rateLimiter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/rateLimiter */ \"(rsc)/./src/lib/rateLimiter.ts\");\n/* harmony import */ var _lib_apiProtection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/apiProtection */ \"(rsc)/./src/lib/apiProtection.ts\");\n// src/app/api/current-program/route.ts - CON CACHÉ Y HEADERS OPTIMIZADOS\n\n\n\n\nasync function GET(request) {\n    try {\n        // Verificar si es una petición válida\n        if (!(0,_lib_apiProtection__WEBPACK_IMPORTED_MODULE_3__.isValidApiRequest)(request)) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>403 - Acceso Denegado</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              height: 100vh;\n              margin: 0;\n              background-color: #f3f4f6;\n            }\n            .container {\n              text-align: center;\n              padding: 2rem;\n              background: white;\n              border-radius: 8px;\n              box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            }\n            h1 { color: #dc2626; margin-bottom: 1rem; }\n            p { color: #6b7280; margin-bottom: 1.5rem; }\n            a { \n              display: inline-block;\n              padding: 0.5rem 1.5rem;\n              background: #dc2626;\n              color: white;\n              text-decoration: none;\n              border-radius: 4px;\n              transition: background 0.2s;\n            }\n            a:hover { background: #b91c1c; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <h1>403 - Acceso Denegado</h1>\n            <p>Esta API no puede ser accedida directamente desde el navegador.</p>\n            <p>Por favor, use la aplicación para acceder a este contenido.</p>\n            <a href=\"/\">Ir a la Radio</a>\n          </div>\n        </body>\n        </html>\n        `, {\n                status: 403,\n                headers: {\n                    'Content-Type': 'text/html; charset=utf-8'\n                }\n            });\n        }\n        // Verificar rate limit\n        if (_lib_rateLimiter__WEBPACK_IMPORTED_MODULE_2__.apiRateLimiter.isRateLimited(request)) {\n            return (0,_lib_apiProtection__WEBPACK_IMPORTED_MODULE_3__.createApiResponse)({\n                success: false,\n                error: 'Demasiadas solicitudes',\n                _meta: {\n                    retryAfter: 60,\n                    timestamp: new Date().toISOString()\n                }\n            }, {\n                status: 429,\n                headers: {\n                    'X-RateLimit-Remaining': _lib_rateLimiter__WEBPACK_IMPORTED_MODULE_2__.apiRateLimiter.getRemainingRequests(request).toString(),\n                    'Retry-After': '60'\n                }\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const stationId = searchParams.get('stationId');\n        if (!stationId) {\n            return (0,_lib_apiProtection__WEBPACK_IMPORTED_MODULE_3__.createApiResponse)({\n                success: false,\n                error: 'Station ID requerido',\n                _meta: {\n                    timestamp: new Date().toISOString()\n                }\n            }, {\n                status: 400\n            });\n        }\n        // getCurrentProgram ya implementa caché internamente\n        const program = await (0,_lib_dataManager__WEBPACK_IMPORTED_MODULE_1__.getCurrentProgram)(stationId);\n        // Generar ETag basado en el programa actual\n        const etag = program ? `\"${program.id}-${program.start_time}-${new Date().getHours()}\"` : `\"empty-${stationId}-${new Date().getHours()}\"`;\n        // Verificar If-None-Match header para respuestas 304\n        const ifNoneMatch = request.headers.get('if-none-match');\n        if (ifNoneMatch === etag) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n                status: 304,\n                headers: {\n                    'ETag': etag,\n                    'Cache-Control': 'public, max-age=30, stale-while-revalidate=60'\n                }\n            });\n        }\n        return (0,_lib_apiProtection__WEBPACK_IMPORTED_MODULE_3__.createApiResponse)({\n            success: true,\n            data: program,\n            _meta: {\n                cached: true,\n                stationId,\n                timestamp: new Date().toISOString(),\n                peruTime: (()=>{\n                    const now = new Date();\n                    const utc = now.getTime() + now.getTimezoneOffset() * 60000;\n                    const peruTime = new Date(utc + 3600000 * -5);\n                    return peruTime.toISOString();\n                })()\n            }\n        }, {\n            headers: {\n                // Caché del navegador: 30 segundos con revalidación\n                'Cache-Control': 'public, max-age=30, stale-while-revalidate=60',\n                // ETag para validación condicional\n                'ETag': etag,\n                // Indicar que el contenido puede variar según estos headers\n                'Vary': 'X-Requested-With, Accept, If-None-Match',\n                // Headers de seguridad adicionales\n                'X-Content-Type-Options': 'nosniff',\n                'X-Frame-Options': 'DENY',\n                // Header personalizado para debugging\n                'X-Program-Found': program ? 'true' : 'false'\n            }\n        });\n    } catch (error) {\n        console.error('Error al obtener programa actual:', error);\n        return (0,_lib_apiProtection__WEBPACK_IMPORTED_MODULE_3__.createApiResponse)({\n            success: false,\n            error: 'Error al obtener programa actual',\n            _meta: {\n                timestamp: new Date().toISOString()\n            }\n        }, {\n            status: 500\n        });\n    }\n}\n// OPTIONS - Para manejar preflight CORS requests\nasync function OPTIONS(request) {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            'Access-Control-Allow-Methods': 'GET, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type, X-Requested-With, Accept',\n            'Access-Control-Max-Age': '86400'\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jdXJyZW50LXByb2dyYW0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEseUVBQXlFO0FBQ2pCO0FBQ0Y7QUFDSDtBQUN3QjtBQUVwRSxlQUFlSyxJQUFJQyxPQUFvQjtJQUM1QyxJQUFJO1FBQ0Ysc0NBQXNDO1FBQ3RDLElBQUksQ0FBQ0gscUVBQWlCQSxDQUFDRyxVQUFVO1lBQy9CLE9BQU8sSUFBSU4scURBQVlBLENBQ3JCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQTZDRCxDQUFDLEVBQ0Q7Z0JBQ0VPLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUNsQjtZQUNGO1FBRUo7UUFFQSx1QkFBdUI7UUFDdkIsSUFBSU4sNERBQWNBLENBQUNPLGFBQWEsQ0FBQ0gsVUFBVTtZQUN6QyxPQUFPRixxRUFBaUJBLENBQ3RCO2dCQUNFTSxTQUFTO2dCQUNUQyxPQUFPO2dCQUNQQyxPQUFPO29CQUNMQyxZQUFZO29CQUNaQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7Z0JBQ25DO1lBQ0YsR0FDQTtnQkFDRVQsUUFBUTtnQkFDUkMsU0FBUztvQkFDUCx5QkFBeUJOLDREQUFjQSxDQUFDZSxvQkFBb0IsQ0FBQ1gsU0FBU1ksUUFBUTtvQkFDOUUsZUFBZTtnQkFDakI7WUFDRjtRQUVKO1FBRUEsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJZCxRQUFRZSxHQUFHO1FBQzVDLE1BQU1DLFlBQVlILGFBQWFJLEdBQUcsQ0FBQztRQUVuQyxJQUFJLENBQUNELFdBQVc7WUFDZCxPQUFPbEIscUVBQWlCQSxDQUN0QjtnQkFDRU0sU0FBUztnQkFDVEMsT0FBTztnQkFDUEMsT0FBTztvQkFDTEUsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztZQUNGLEdBQ0E7Z0JBQUVULFFBQVE7WUFBSTtRQUVsQjtRQUVBLHFEQUFxRDtRQUNyRCxNQUFNaUIsVUFBVSxNQUFNdkIsbUVBQWlCQSxDQUFDcUI7UUFFeEMsNENBQTRDO1FBQzVDLE1BQU1HLE9BQU9ELFVBQ1QsQ0FBQyxDQUFDLEVBQUVBLFFBQVFFLEVBQUUsQ0FBQyxDQUFDLEVBQUVGLFFBQVFHLFVBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSVosT0FBT2EsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUNoRSxDQUFDLE9BQU8sRUFBRU4sVUFBVSxDQUFDLEVBQUUsSUFBSVAsT0FBT2EsUUFBUSxHQUFHLENBQUMsQ0FBQztRQUVuRCxxREFBcUQ7UUFDckQsTUFBTUMsY0FBY3ZCLFFBQVFFLE9BQU8sQ0FBQ2UsR0FBRyxDQUFDO1FBQ3hDLElBQUlNLGdCQUFnQkosTUFBTTtZQUN4QixPQUFPLElBQUl6QixxREFBWUEsQ0FBQyxNQUFNO2dCQUM1Qk8sUUFBUTtnQkFDUkMsU0FBUztvQkFDUCxRQUFRaUI7b0JBQ1IsaUJBQWlCO2dCQUNuQjtZQUNGO1FBQ0Y7UUFFQSxPQUFPckIscUVBQWlCQSxDQUN0QjtZQUNFTSxTQUFTO1lBQ1RvQixNQUFNTjtZQUNOWixPQUFPO2dCQUNMbUIsUUFBUTtnQkFDUlQ7Z0JBQ0FSLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztnQkFDakNnQixVQUFVLENBQUM7b0JBQ1QsTUFBTUMsTUFBTSxJQUFJbEI7b0JBQ2hCLE1BQU1tQixNQUFNRCxJQUFJRSxPQUFPLEtBQU1GLElBQUlHLGlCQUFpQixLQUFLO29CQUN2RCxNQUFNSixXQUFXLElBQUlqQixLQUFLbUIsTUFBTyxVQUFVLENBQUM7b0JBQzVDLE9BQU9GLFNBQVNoQixXQUFXO2dCQUM3QjtZQUNGO1FBQ0YsR0FDQTtZQUNFUixTQUFTO2dCQUNQLG9EQUFvRDtnQkFDcEQsaUJBQWlCO2dCQUNqQixtQ0FBbUM7Z0JBQ25DLFFBQVFpQjtnQkFDUiw0REFBNEQ7Z0JBQzVELFFBQVE7Z0JBQ1IsbUNBQW1DO2dCQUNuQywwQkFBMEI7Z0JBQzFCLG1CQUFtQjtnQkFDbkIsc0NBQXNDO2dCQUN0QyxtQkFBbUJELFVBQVUsU0FBUztZQUN4QztRQUNGO0lBRUosRUFBRSxPQUFPYixPQUFPO1FBQ2QwQixRQUFRMUIsS0FBSyxDQUFDLHFDQUFxQ0E7UUFFbkQsT0FBT1AscUVBQWlCQSxDQUN0QjtZQUNFTSxTQUFTO1lBQ1RDLE9BQU87WUFDUEMsT0FBTztnQkFDTEUsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DO1FBQ0YsR0FDQTtZQUFFVCxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLGlEQUFpRDtBQUMxQyxlQUFlK0IsUUFBUWhDLE9BQW9CO0lBQ2hELE9BQU8sSUFBSU4scURBQVlBLENBQUMsTUFBTTtRQUM1Qk8sUUFBUTtRQUNSQyxTQUFTO1lBQ1AsZ0NBQWdDO1lBQ2hDLGdDQUFnQztZQUNoQywwQkFBMEI7UUFDNUI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVTVUFSSU9cXERlc2t0b3BcXEFQUC1FWElUT1NBMjAyNlxcc3JjXFxhcHBcXGFwaVxcY3VycmVudC1wcm9ncmFtXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL2FwaS9jdXJyZW50LXByb2dyYW0vcm91dGUudHMgLSBDT04gQ0FDSMOJIFkgSEVBREVSUyBPUFRJTUlaQURPU1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEN1cnJlbnRQcm9ncmFtIH0gZnJvbSAnQC9saWIvZGF0YU1hbmFnZXInO1xuaW1wb3J0IHsgYXBpUmF0ZUxpbWl0ZXIgfSBmcm9tICdAL2xpYi9yYXRlTGltaXRlcic7XG5pbXBvcnQgeyBpc1ZhbGlkQXBpUmVxdWVzdCwgY3JlYXRlQXBpUmVzcG9uc2UgfSBmcm9tICdAL2xpYi9hcGlQcm90ZWN0aW9uJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIFZlcmlmaWNhciBzaSBlcyB1bmEgcGV0aWNpw7NuIHbDoWxpZGFcbiAgICBpZiAoIWlzVmFsaWRBcGlSZXF1ZXN0KHJlcXVlc3QpKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcbiAgICAgICAgYFxuICAgICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgICAgPGh0bWw+XG4gICAgICAgIDxoZWFkPlxuICAgICAgICAgIDx0aXRsZT40MDMgLSBBY2Nlc28gRGVuZWdhZG88L3RpdGxlPlxuICAgICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgIGJvZHkge1xuICAgICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmM2Y0ZjY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGgxIHsgY29sb3I6ICNkYzI2MjY7IG1hcmdpbi1ib3R0b206IDFyZW07IH1cbiAgICAgICAgICAgIHAgeyBjb2xvcjogIzZiNzI4MDsgbWFyZ2luLWJvdHRvbTogMS41cmVtOyB9XG4gICAgICAgICAgICBhIHsgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtIDEuNXJlbTtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2RjMjYyNjtcbiAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYTpob3ZlciB7IGJhY2tncm91bmQ6ICNiOTFjMWM7IH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2hlYWQ+XG4gICAgICAgIDxib2R5PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgIDxoMT40MDMgLSBBY2Nlc28gRGVuZWdhZG88L2gxPlxuICAgICAgICAgICAgPHA+RXN0YSBBUEkgbm8gcHVlZGUgc2VyIGFjY2VkaWRhIGRpcmVjdGFtZW50ZSBkZXNkZSBlbCBuYXZlZ2Fkb3IuPC9wPlxuICAgICAgICAgICAgPHA+UG9yIGZhdm9yLCB1c2UgbGEgYXBsaWNhY2nDs24gcGFyYSBhY2NlZGVyIGEgZXN0ZSBjb250ZW5pZG8uPC9wPlxuICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5JciBhIGxhIFJhZGlvPC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2JvZHk+XG4gICAgICAgIDwvaHRtbD5cbiAgICAgICAgYCxcbiAgICAgICAge1xuICAgICAgICAgIHN0YXR1czogNDAzLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmaWNhciByYXRlIGxpbWl0XG4gICAgaWYgKGFwaVJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQocmVxdWVzdCkpIHtcbiAgICAgIHJldHVybiBjcmVhdGVBcGlSZXNwb25zZShcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6ICdEZW1hc2lhZGFzIHNvbGljaXR1ZGVzJyxcbiAgICAgICAgICBfbWV0YToge1xuICAgICAgICAgICAgcmV0cnlBZnRlcjogNjAsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBcbiAgICAgICAgICBzdGF0dXM6IDQyOSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnWC1SYXRlTGltaXQtUmVtYWluaW5nJzogYXBpUmF0ZUxpbWl0ZXIuZ2V0UmVtYWluaW5nUmVxdWVzdHMocmVxdWVzdCkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICdSZXRyeS1BZnRlcic6ICc2MCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBzdGF0aW9uSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGF0aW9uSWQnKTtcbiAgICBcbiAgICBpZiAoIXN0YXRpb25JZCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUFwaVJlc3BvbnNlKFxuICAgICAgICB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBlcnJvcjogJ1N0YXRpb24gSUQgcmVxdWVyaWRvJyxcbiAgICAgICAgICBfbWV0YToge1xuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gZ2V0Q3VycmVudFByb2dyYW0geWEgaW1wbGVtZW50YSBjYWNow6kgaW50ZXJuYW1lbnRlXG4gICAgY29uc3QgcHJvZ3JhbSA9IGF3YWl0IGdldEN1cnJlbnRQcm9ncmFtKHN0YXRpb25JZCk7XG4gICAgXG4gICAgLy8gR2VuZXJhciBFVGFnIGJhc2FkbyBlbiBlbCBwcm9ncmFtYSBhY3R1YWxcbiAgICBjb25zdCBldGFnID0gcHJvZ3JhbSBcbiAgICAgID8gYFwiJHtwcm9ncmFtLmlkfS0ke3Byb2dyYW0uc3RhcnRfdGltZX0tJHtuZXcgRGF0ZSgpLmdldEhvdXJzKCl9XCJgIFxuICAgICAgOiBgXCJlbXB0eS0ke3N0YXRpb25JZH0tJHtuZXcgRGF0ZSgpLmdldEhvdXJzKCl9XCJgO1xuICAgIFxuICAgIC8vIFZlcmlmaWNhciBJZi1Ob25lLU1hdGNoIGhlYWRlciBwYXJhIHJlc3B1ZXN0YXMgMzA0XG4gICAgY29uc3QgaWZOb25lTWF0Y2ggPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdpZi1ub25lLW1hdGNoJyk7XG4gICAgaWYgKGlmTm9uZU1hdGNoID09PSBldGFnKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7IFxuICAgICAgICBzdGF0dXM6IDMwNCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdFVGFnJzogZXRhZyxcbiAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICdwdWJsaWMsIG1heC1hZ2U9MzAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9NjAnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY3JlYXRlQXBpUmVzcG9uc2UoXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgZGF0YTogcHJvZ3JhbSxcbiAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICBjYWNoZWQ6IHRydWUsXG4gICAgICAgICAgc3RhdGlvbklkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHBlcnVUaW1lOiAoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHV0YyA9IG5vdy5nZXRUaW1lKCkgKyAobm93LmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCk7XG4gICAgICAgICAgICBjb25zdCBwZXJ1VGltZSA9IG5ldyBEYXRlKHV0YyArICgzNjAwMDAwICogLTUpKTtcbiAgICAgICAgICAgIHJldHVybiBwZXJ1VGltZS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIH0pKClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIC8vIENhY2jDqSBkZWwgbmF2ZWdhZG9yOiAzMCBzZWd1bmRvcyBjb24gcmV2YWxpZGFjacOzblxuICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ3B1YmxpYywgbWF4LWFnZT0zMCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MCcsXG4gICAgICAgICAgLy8gRVRhZyBwYXJhIHZhbGlkYWNpw7NuIGNvbmRpY2lvbmFsXG4gICAgICAgICAgJ0VUYWcnOiBldGFnLFxuICAgICAgICAgIC8vIEluZGljYXIgcXVlIGVsIGNvbnRlbmlkbyBwdWVkZSB2YXJpYXIgc2Vnw7puIGVzdG9zIGhlYWRlcnNcbiAgICAgICAgICAnVmFyeSc6ICdYLVJlcXVlc3RlZC1XaXRoLCBBY2NlcHQsIElmLU5vbmUtTWF0Y2gnLFxuICAgICAgICAgIC8vIEhlYWRlcnMgZGUgc2VndXJpZGFkIGFkaWNpb25hbGVzXG4gICAgICAgICAgJ1gtQ29udGVudC1UeXBlLU9wdGlvbnMnOiAnbm9zbmlmZicsXG4gICAgICAgICAgJ1gtRnJhbWUtT3B0aW9ucyc6ICdERU5ZJyxcbiAgICAgICAgICAvLyBIZWFkZXIgcGVyc29uYWxpemFkbyBwYXJhIGRlYnVnZ2luZ1xuICAgICAgICAgICdYLVByb2dyYW0tRm91bmQnOiBwcm9ncmFtID8gJ3RydWUnIDogJ2ZhbHNlJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBvYnRlbmVyIHByb2dyYW1hIGFjdHVhbDonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIGNyZWF0ZUFwaVJlc3BvbnNlKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ0Vycm9yIGFsIG9idGVuZXIgcHJvZ3JhbWEgYWN0dWFsJyxcbiAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBPUFRJT05TIC0gUGFyYSBtYW5lamFyIHByZWZsaWdodCBDT1JTIHJlcXVlc3RzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gT1BUSU9OUyhyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBPUFRJT05TJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgWC1SZXF1ZXN0ZWQtV2l0aCwgQWNjZXB0JyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1NYXgtQWdlJzogJzg2NDAwJywgLy8gMjQgaG9yYXNcbiAgICB9XG4gIH0pO1xufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRDdXJyZW50UHJvZ3JhbSIsImFwaVJhdGVMaW1pdGVyIiwiaXNWYWxpZEFwaVJlcXVlc3QiLCJjcmVhdGVBcGlSZXNwb25zZSIsIkdFVCIsInJlcXVlc3QiLCJzdGF0dXMiLCJoZWFkZXJzIiwiaXNSYXRlTGltaXRlZCIsInN1Y2Nlc3MiLCJlcnJvciIsIl9tZXRhIiwicmV0cnlBZnRlciIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImdldFJlbWFpbmluZ1JlcXVlc3RzIiwidG9TdHJpbmciLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJzdGF0aW9uSWQiLCJnZXQiLCJwcm9ncmFtIiwiZXRhZyIsImlkIiwic3RhcnRfdGltZSIsImdldEhvdXJzIiwiaWZOb25lTWF0Y2giLCJkYXRhIiwiY2FjaGVkIiwicGVydVRpbWUiLCJub3ciLCJ1dGMiLCJnZXRUaW1lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJjb25zb2xlIiwiT1BUSU9OUyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/current-program/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/apiProtection.ts":
/*!**********************************!*\
  !*** ./src/lib/apiProtection.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApiResponse: () => (/* binding */ createApiResponse),\n/* harmony export */   isValidApiRequest: () => (/* binding */ isValidApiRequest)\n/* harmony export */ });\n// src/lib/apiProtection.ts\n// Leer directamente de las variables de entorno\nconst getAllowedHosts = ()=>{\n    const domainString = process.env.NEXT_PUBLIC_DOMAIN || 'localhost:9544';\n    return domainString.split(',').map((domain)=>domain.trim());\n};\n// Lista de hosts permitidos\nconst allowedHosts = getAllowedHosts();\nfunction isValidApiRequest(request) {\n    // Obtener headers\n    const referer = request.headers.get('referer');\n    const userAgent = request.headers.get('user-agent');\n    const xRequestedWith = request.headers.get('x-requested-with');\n    const accept = request.headers.get('accept');\n    const host = request.headers.get('host') || '';\n    // Si estamos accediendo desde localhost o una IP conocida, permitir más flexibilidad\n    const isLocalAccess = allowedHosts.includes(host);\n    if (isLocalAccess && xRequestedWith) {\n        // Para desarrollo local con IP, ser más permisivo con las peticiones AJAX\n        return true;\n    }\n    // Rechazar si no hay user agent (probablemente un bot)\n    if (!userAgent) {\n        return false;\n    }\n    // Verificar si es una petición desde el navegador directamente\n    const isBrowserDirectAccess = !referer && !xRequestedWith && userAgent.includes('Mozilla') && !accept?.includes('application/json');\n    if (isBrowserDirectAccess) {\n        return false;\n    }\n    // Si hay referer, verificar que sea de un origen permitido\n    if (referer) {\n        try {\n            const refererUrl = new URL(referer);\n            // Verificar si el referer está en nuestra lista de hosts permitidos\n            const refererHost = refererUrl.host;\n            if (allowedHosts.includes(refererHost)) {\n                return true;\n            }\n            // Comparar con el host de la solicitud\n            if (refererHost !== host) {\n                return false;\n            }\n        } catch  {\n            return false;\n        }\n    }\n    // Verificar que sea una petición AJAX\n    const isAjax = xRequestedWith === 'XMLHttpRequest' || (accept?.includes('application/json') ?? false);\n    return isAjax;\n}\nfunction createApiResponse(data, options) {\n    return Response.json(data, {\n        ...options,\n        headers: {\n            'Content-Type': 'application/json',\n            'X-Content-Type-Options': 'nosniff',\n            'X-Frame-Options': 'DENY',\n            'X-XSS-Protection': '1; mode=block',\n            'Referrer-Policy': 'strict-origin-when-cross-origin',\n            // Agregar headers CORS para permitir acceso desde IP\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n            ...options?.headers\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FwaVByb3RlY3Rpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSwyQkFBMkI7QUFHM0IsZ0RBQWdEO0FBQ2hELE1BQU1BLGtCQUFrQjtJQUN0QixNQUFNQyxlQUFlQyxRQUFRQyxHQUFHLENBQUNDLGtCQUFrQixJQUFJO0lBQ3ZELE9BQU9ILGFBQWFJLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLFNBQVVBLE9BQU9DLElBQUk7QUFDMUQ7QUFFQSw0QkFBNEI7QUFDNUIsTUFBTUMsZUFBZVQ7QUFFZCxTQUFTVSxrQkFBa0JDLE9BQW9CO0lBQ3BELGtCQUFrQjtJQUNsQixNQUFNQyxVQUFVRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNwQyxNQUFNQyxZQUFZSixRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUN0QyxNQUFNRSxpQkFBaUJMLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQzNDLE1BQU1HLFNBQVNOLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ25DLE1BQU1JLE9BQU9QLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFdBQVc7SUFFNUMscUZBQXFGO0lBQ3JGLE1BQU1LLGdCQUFnQlYsYUFBYVcsUUFBUSxDQUFDRjtJQUU1QyxJQUFJQyxpQkFBaUJILGdCQUFnQjtRQUNuQywwRUFBMEU7UUFDMUUsT0FBTztJQUNUO0lBRUEsdURBQXVEO0lBQ3ZELElBQUksQ0FBQ0QsV0FBVztRQUNkLE9BQU87SUFDVDtJQUVBLCtEQUErRDtJQUMvRCxNQUFNTSx3QkFBd0IsQ0FBQ1QsV0FDRCxDQUFDSSxrQkFDREQsVUFBVUssUUFBUSxDQUFDLGNBQ25CLENBQUNILFFBQVFHLFNBQVM7SUFFaEQsSUFBSUMsdUJBQXVCO1FBQ3pCLE9BQU87SUFDVDtJQUVBLDJEQUEyRDtJQUMzRCxJQUFJVCxTQUFTO1FBQ1gsSUFBSTtZQUNGLE1BQU1VLGFBQWEsSUFBSUMsSUFBSVg7WUFFM0Isb0VBQW9FO1lBQ3BFLE1BQU1ZLGNBQWNGLFdBQVdKLElBQUk7WUFDbkMsSUFBSVQsYUFBYVcsUUFBUSxDQUFDSSxjQUFjO2dCQUN0QyxPQUFPO1lBQ1Q7WUFFQSx1Q0FBdUM7WUFDdkMsSUFBSUEsZ0JBQWdCTixNQUFNO2dCQUN4QixPQUFPO1lBQ1Q7UUFDRixFQUFFLE9BQU07WUFDTixPQUFPO1FBQ1Q7SUFDRjtJQUVBLHNDQUFzQztJQUN0QyxNQUFNTyxTQUFTVCxtQkFBbUIsb0JBQ2xCQyxDQUFBQSxRQUFRRyxTQUFTLHVCQUF1QixLQUFJO0lBRTVELE9BQU9LO0FBQ1Q7QUFFTyxTQUFTQyxrQkFBa0JDLElBQVMsRUFBRUMsT0FBc0I7SUFDakUsT0FBT0MsU0FBU0MsSUFBSSxDQUFDSCxNQUFNO1FBQ3pCLEdBQUdDLE9BQU87UUFDVmYsU0FBUztZQUNQLGdCQUFnQjtZQUNoQiwwQkFBMEI7WUFDMUIsbUJBQW1CO1lBQ25CLG9CQUFvQjtZQUNwQixtQkFBbUI7WUFDbkIscURBQXFEO1lBQ3JELCtCQUErQjtZQUMvQixnQ0FBZ0M7WUFDaEMsZ0NBQWdDO1lBQ2hDLEdBQUdlLFNBQVNmLE9BQU87UUFDckI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVTVUFSSU9cXERlc2t0b3BcXEFQUC1FWElUT1NBMjAyNlxcc3JjXFxsaWJcXGFwaVByb3RlY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9hcGlQcm90ZWN0aW9uLnRzXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcblxuLy8gTGVlciBkaXJlY3RhbWVudGUgZGUgbGFzIHZhcmlhYmxlcyBkZSBlbnRvcm5vXG5jb25zdCBnZXRBbGxvd2VkSG9zdHMgPSAoKSA9PiB7XG4gIGNvbnN0IGRvbWFpblN0cmluZyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RPTUFJTiB8fCAnbG9jYWxob3N0Ojk1NDQnO1xuICByZXR1cm4gZG9tYWluU3RyaW5nLnNwbGl0KCcsJykubWFwKGRvbWFpbiA9PiBkb21haW4udHJpbSgpKTtcbn07XG5cbi8vIExpc3RhIGRlIGhvc3RzIHBlcm1pdGlkb3NcbmNvbnN0IGFsbG93ZWRIb3N0cyA9IGdldEFsbG93ZWRIb3N0cygpO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEFwaVJlcXVlc3QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBib29sZWFuIHtcbiAgLy8gT2J0ZW5lciBoZWFkZXJzXG4gIGNvbnN0IHJlZmVyZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdyZWZlcmVyJyk7XG4gIGNvbnN0IHVzZXJBZ2VudCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKTtcbiAgY29uc3QgeFJlcXVlc3RlZFdpdGggPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlcXVlc3RlZC13aXRoJyk7XG4gIGNvbnN0IGFjY2VwdCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2FjY2VwdCcpO1xuICBjb25zdCBob3N0ID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnaG9zdCcpIHx8ICcnO1xuICBcbiAgLy8gU2kgZXN0YW1vcyBhY2NlZGllbmRvIGRlc2RlIGxvY2FsaG9zdCBvIHVuYSBJUCBjb25vY2lkYSwgcGVybWl0aXIgbcOhcyBmbGV4aWJpbGlkYWRcbiAgY29uc3QgaXNMb2NhbEFjY2VzcyA9IGFsbG93ZWRIb3N0cy5pbmNsdWRlcyhob3N0KTtcbiAgXG4gIGlmIChpc0xvY2FsQWNjZXNzICYmIHhSZXF1ZXN0ZWRXaXRoKSB7XG4gICAgLy8gUGFyYSBkZXNhcnJvbGxvIGxvY2FsIGNvbiBJUCwgc2VyIG3DoXMgcGVybWlzaXZvIGNvbiBsYXMgcGV0aWNpb25lcyBBSkFYXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIC8vIFJlY2hhemFyIHNpIG5vIGhheSB1c2VyIGFnZW50IChwcm9iYWJsZW1lbnRlIHVuIGJvdClcbiAgaWYgKCF1c2VyQWdlbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIC8vIFZlcmlmaWNhciBzaSBlcyB1bmEgcGV0aWNpw7NuIGRlc2RlIGVsIG5hdmVnYWRvciBkaXJlY3RhbWVudGVcbiAgY29uc3QgaXNCcm93c2VyRGlyZWN0QWNjZXNzID0gIXJlZmVyZXIgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF4UmVxdWVzdGVkV2l0aCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckFnZW50LmluY2x1ZGVzKCdNb3ppbGxhJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWFjY2VwdD8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgXG4gIGlmIChpc0Jyb3dzZXJEaXJlY3RBY2Nlc3MpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIC8vIFNpIGhheSByZWZlcmVyLCB2ZXJpZmljYXIgcXVlIHNlYSBkZSB1biBvcmlnZW4gcGVybWl0aWRvXG4gIGlmIChyZWZlcmVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZmVyZXJVcmwgPSBuZXcgVVJMKHJlZmVyZXIpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZmljYXIgc2kgZWwgcmVmZXJlciBlc3TDoSBlbiBudWVzdHJhIGxpc3RhIGRlIGhvc3RzIHBlcm1pdGlkb3NcbiAgICAgIGNvbnN0IHJlZmVyZXJIb3N0ID0gcmVmZXJlclVybC5ob3N0O1xuICAgICAgaWYgKGFsbG93ZWRIb3N0cy5pbmNsdWRlcyhyZWZlcmVySG9zdCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbXBhcmFyIGNvbiBlbCBob3N0IGRlIGxhIHNvbGljaXR1ZFxuICAgICAgaWYgKHJlZmVyZXJIb3N0ICE9PSBob3N0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFZlcmlmaWNhciBxdWUgc2VhIHVuYSBwZXRpY2nDs24gQUpBWFxuICBjb25zdCBpc0FqYXggPSB4UmVxdWVzdGVkV2l0aCA9PT0gJ1hNTEh0dHBSZXF1ZXN0JyB8fCBcbiAgICAgICAgICAgICAgICAgKGFjY2VwdD8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSA/PyBmYWxzZSk7XG4gIFxuICByZXR1cm4gaXNBamF4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXBpUmVzcG9uc2UoZGF0YTogYW55LCBvcHRpb25zPzogUmVzcG9uc2VJbml0KSB7XG4gIHJldHVybiBSZXNwb25zZS5qc29uKGRhdGEsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnWC1Db250ZW50LVR5cGUtT3B0aW9ucyc6ICdub3NuaWZmJyxcbiAgICAgICdYLUZyYW1lLU9wdGlvbnMnOiAnREVOWScsXG4gICAgICAnWC1YU1MtUHJvdGVjdGlvbic6ICcxOyBtb2RlPWJsb2NrJyxcbiAgICAgICdSZWZlcnJlci1Qb2xpY3knOiAnc3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpbicsXG4gICAgICAvLyBBZ3JlZ2FyIGhlYWRlcnMgQ09SUyBwYXJhIHBlcm1pdGlyIGFjY2VzbyBkZXNkZSBJUFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnLFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyxcbiAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgfVxuICB9KTtcbn0iXSwibmFtZXMiOlsiZ2V0QWxsb3dlZEhvc3RzIiwiZG9tYWluU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0RPTUFJTiIsInNwbGl0IiwibWFwIiwiZG9tYWluIiwidHJpbSIsImFsbG93ZWRIb3N0cyIsImlzVmFsaWRBcGlSZXF1ZXN0IiwicmVxdWVzdCIsInJlZmVyZXIiLCJoZWFkZXJzIiwiZ2V0IiwidXNlckFnZW50IiwieFJlcXVlc3RlZFdpdGgiLCJhY2NlcHQiLCJob3N0IiwiaXNMb2NhbEFjY2VzcyIsImluY2x1ZGVzIiwiaXNCcm93c2VyRGlyZWN0QWNjZXNzIiwicmVmZXJlclVybCIsIlVSTCIsInJlZmVyZXJIb3N0IiwiaXNBamF4IiwiY3JlYXRlQXBpUmVzcG9uc2UiLCJkYXRhIiwib3B0aW9ucyIsIlJlc3BvbnNlIiwianNvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/apiProtection.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/cache.ts":
/*!**************************!*\
  !*** ./src/lib/cache.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheManager: () => (/* binding */ cacheManager),\n/* harmony export */   currentProgramCache: () => (/* binding */ currentProgramCache),\n/* harmony export */   currentProgramCacheUtils: () => (/* binding */ currentProgramCacheUtils),\n/* harmony export */   imagesCache: () => (/* binding */ imagesCache),\n/* harmony export */   imagesCacheUtils: () => (/* binding */ imagesCacheUtils),\n/* harmony export */   programsCache: () => (/* binding */ programsCache),\n/* harmony export */   programsCacheUtils: () => (/* binding */ programsCacheUtils),\n/* harmony export */   stationsCache: () => (/* binding */ stationsCache),\n/* harmony export */   stationsCacheUtils: () => (/* binding */ stationsCacheUtils),\n/* harmony export */   warmUpCache: () => (/* binding */ warmUpCache)\n/* harmony export */ });\n/* harmony import */ var node_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node-cache */ \"(rsc)/./node_modules/node-cache/index.js\");\n/* harmony import */ var node_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_cache__WEBPACK_IMPORTED_MODULE_0__);\n// src/lib/cache.ts\n\n// Configuración de diferentes cachés con TTL específicos\nconst cacheConfig = {\n    // Datos que cambian poco frecuentemente\n    stations: {\n        stdTTL: 3600,\n        checkperiod: 600\n    },\n    programs: {\n        stdTTL: 1800,\n        checkperiod: 300\n    },\n    currentProgram: {\n        stdTTL: 60,\n        checkperiod: 30\n    },\n    images: {\n        stdTTL: 86400,\n        checkperiod: 3600\n    }\n};\n// Crear instancias de caché\nconst stationsCache = new (node_cache__WEBPACK_IMPORTED_MODULE_0___default())(cacheConfig.stations);\nconst programsCache = new (node_cache__WEBPACK_IMPORTED_MODULE_0___default())(cacheConfig.programs);\nconst currentProgramCache = new (node_cache__WEBPACK_IMPORTED_MODULE_0___default())(cacheConfig.currentProgram);\nconst imagesCache = new (node_cache__WEBPACK_IMPORTED_MODULE_0___default())(cacheConfig.images);\nclass CacheManager {\n    constructor(){\n        this.stats = new Map();\n        // Inicializar estadísticas\n        [\n            'stations',\n            'programs',\n            'currentProgram',\n            'images'\n        ].forEach((cache)=>{\n            this.stats.set(cache, {\n                hits: 0,\n                misses: 0,\n                sets: 0,\n                deletes: 0,\n                hitRate: 0\n            });\n        });\n        // Eventos de caché para estadísticas\n        this.setupCacheEvents();\n    }\n    setupCacheEvents() {\n        // Configurar eventos para cada caché\n        const caches = [\n            {\n                name: 'stations',\n                instance: stationsCache\n            },\n            {\n                name: 'programs',\n                instance: programsCache\n            },\n            {\n                name: 'currentProgram',\n                instance: currentProgramCache\n            },\n            {\n                name: 'images',\n                instance: imagesCache\n            }\n        ];\n        caches.forEach(({ name, instance })=>{\n            instance.on('hit', ()=>this.recordHit(name));\n            instance.on('miss', ()=>this.recordMiss(name));\n            instance.on('set', ()=>this.recordSet(name));\n            instance.on('del', ()=>this.recordDelete(name));\n        });\n    }\n    recordHit(cacheName) {\n        const stats = this.stats.get(cacheName);\n        stats.hits++;\n        this.updateHitRate(cacheName);\n    }\n    recordMiss(cacheName) {\n        const stats = this.stats.get(cacheName);\n        stats.misses++;\n        this.updateHitRate(cacheName);\n    }\n    recordSet(cacheName) {\n        const stats = this.stats.get(cacheName);\n        stats.sets++;\n    }\n    recordDelete(cacheName) {\n        const stats = this.stats.get(cacheName);\n        stats.deletes++;\n    }\n    updateHitRate(cacheName) {\n        const stats = this.stats.get(cacheName);\n        const total = stats.hits + stats.misses;\n        stats.hitRate = total > 0 ? stats.hits / total * 100 : 0;\n    }\n    // Métodos públicos para obtener estadísticas\n    getStats(cacheName) {\n        if (cacheName) {\n            return this.stats.get(cacheName);\n        }\n        return this.stats;\n    }\n    // Limpiar todos los cachés\n    clearAll() {\n        stationsCache.flushAll();\n        programsCache.flushAll();\n        currentProgramCache.flushAll();\n        imagesCache.flushAll();\n        console.log('✅ Todos los cachés han sido limpiados');\n    }\n    // Obtener información de uso de memoria\n    getMemoryUsage() {\n        return {\n            stations: {\n                keys: stationsCache.keys().length,\n                size: JSON.stringify(stationsCache.data).length\n            },\n            programs: {\n                keys: programsCache.keys().length,\n                size: JSON.stringify(programsCache.data).length\n            },\n            currentProgram: {\n                keys: currentProgramCache.keys().length,\n                size: JSON.stringify(currentProgramCache.data).length\n            },\n            images: {\n                keys: imagesCache.keys().length,\n                size: JSON.stringify(imagesCache.data).length\n            }\n        };\n    }\n}\n// Instancia única del manager\nconst cacheManager = new CacheManager();\n// Funciones de caché específicas\n// Cache de estaciones\nconst stationsCacheUtils = {\n    get: (key)=>stationsCache.get(key),\n    set: (key, value, ttl)=>stationsCache.set(key, value, ttl || cacheConfig.stations.stdTTL),\n    del: (key)=>stationsCache.del(key),\n    has: (key)=>stationsCache.has(key),\n    flush: ()=>stationsCache.flushAll()\n};\n// Cache de programas\nconst programsCacheUtils = {\n    get: (key)=>programsCache.get(key),\n    set: (key, value, ttl)=>programsCache.set(key, value, ttl || cacheConfig.programs.stdTTL),\n    del: (key)=>programsCache.del(key),\n    has: (key)=>programsCache.has(key),\n    flush: ()=>programsCache.flushAll(),\n    // Método especial para invalidar programas de una estación\n    invalidateStation: (stationId)=>{\n        const keys = programsCache.keys();\n        keys.forEach((key)=>{\n            if (key.includes(stationId)) {\n                programsCache.del(key);\n            }\n        });\n    }\n};\n// Cache de programa actual\nconst currentProgramCacheUtils = {\n    get: (stationId)=>currentProgramCache.get(`current_${stationId}`),\n    set: (stationId, value)=>currentProgramCache.set(`current_${stationId}`, value),\n    del: (stationId)=>currentProgramCache.del(`current_${stationId}`),\n    has: (stationId)=>currentProgramCache.has(`current_${stationId}`),\n    flush: ()=>currentProgramCache.flushAll()\n};\n// Cache de imágenes procesadas\nconst imagesCacheUtils = {\n    get: (url)=>imagesCache.get(url),\n    set: (url, value, ttl)=>imagesCache.set(url, value, ttl || cacheConfig.images.stdTTL),\n    del: (url)=>imagesCache.del(url),\n    has: (url)=>imagesCache.has(url),\n    flush: ()=>imagesCache.flushAll()\n};\n// Función para precalentar el caché\nasync function warmUpCache() {\n    console.log('🔥 Calentando caché...');\n    try {\n        // Aquí puedes agregar lógica para precargar datos importantes\n        // Por ejemplo, cargar todas las estaciones\n        const { getStations } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./dataManager */ \"(rsc)/./src/lib/dataManager.ts\"));\n        const stations = await getStations();\n        stationsCacheUtils.set('all_stations', {\n            success: true,\n            data: stations\n        });\n        console.log('✅ Caché precalentado exitosamente');\n    } catch (error) {\n        console.error('❌ Error precalentando caché:', error);\n    }\n}\n// Exportar la instancia principal para uso directo si es necesario\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUU7QUFDTyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVU1VBUklPXFxEZXNrdG9wXFxBUFAtRVhJVE9TQTIwMjZcXHNyY1xcbGliXFxjYWNoZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2NhY2hlLnRzXG5pbXBvcnQgTm9kZUNhY2hlIGZyb20gJ25vZGUtY2FjaGUnO1xuXG4vLyBDb25maWd1cmFjacOzbiBkZSBkaWZlcmVudGVzIGNhY2jDqXMgY29uIFRUTCBlc3BlY8OtZmljb3NcbmNvbnN0IGNhY2hlQ29uZmlnID0ge1xuICAvLyBEYXRvcyBxdWUgY2FtYmlhbiBwb2NvIGZyZWN1ZW50ZW1lbnRlXG4gIHN0YXRpb25zOiB7IHN0ZFRUTDogMzYwMCwgY2hlY2twZXJpb2Q6IDYwMCB9LCAvLyAxIGhvcmFcbiAgcHJvZ3JhbXM6IHsgc3RkVFRMOiAxODAwLCBjaGVja3BlcmlvZDogMzAwIH0sIC8vIDMwIG1pbnV0b3NcbiAgY3VycmVudFByb2dyYW06IHsgc3RkVFRMOiA2MCwgY2hlY2twZXJpb2Q6IDMwIH0sIC8vIDEgbWludXRvXG4gIGltYWdlczogeyBzdGRUVEw6IDg2NDAwLCBjaGVja3BlcmlvZDogMzYwMCB9LCAvLyAyNCBob3Jhc1xufTtcblxuLy8gQ3JlYXIgaW5zdGFuY2lhcyBkZSBjYWNow6lcbmNvbnN0IHN0YXRpb25zQ2FjaGUgPSBuZXcgTm9kZUNhY2hlKGNhY2hlQ29uZmlnLnN0YXRpb25zKTtcbmNvbnN0IHByb2dyYW1zQ2FjaGUgPSBuZXcgTm9kZUNhY2hlKGNhY2hlQ29uZmlnLnByb2dyYW1zKTtcbmNvbnN0IGN1cnJlbnRQcm9ncmFtQ2FjaGUgPSBuZXcgTm9kZUNhY2hlKGNhY2hlQ29uZmlnLmN1cnJlbnRQcm9ncmFtKTtcbmNvbnN0IGltYWdlc0NhY2hlID0gbmV3IE5vZGVDYWNoZShjYWNoZUNvbmZpZy5pbWFnZXMpO1xuXG4vLyBFc3RhZMOtc3RpY2FzIGRlIGNhY2jDqVxuaW50ZXJmYWNlIENhY2hlU3RhdHMge1xuICBoaXRzOiBudW1iZXI7XG4gIG1pc3NlczogbnVtYmVyO1xuICBzZXRzOiBudW1iZXI7XG4gIGRlbGV0ZXM6IG51bWJlcjtcbiAgaGl0UmF0ZTogbnVtYmVyO1xufVxuXG5jbGFzcyBDYWNoZU1hbmFnZXIge1xuICBwcml2YXRlIHN0YXRzOiBNYXA8c3RyaW5nLCBDYWNoZVN0YXRzPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBJbmljaWFsaXphciBlc3RhZMOtc3RpY2FzXG4gICAgWydzdGF0aW9ucycsICdwcm9ncmFtcycsICdjdXJyZW50UHJvZ3JhbScsICdpbWFnZXMnXS5mb3JFYWNoKGNhY2hlID0+IHtcbiAgICAgIHRoaXMuc3RhdHMuc2V0KGNhY2hlLCB7XG4gICAgICAgIGhpdHM6IDAsXG4gICAgICAgIG1pc3NlczogMCxcbiAgICAgICAgc2V0czogMCxcbiAgICAgICAgZGVsZXRlczogMCxcbiAgICAgICAgaGl0UmF0ZTogMFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudG9zIGRlIGNhY2jDqSBwYXJhIGVzdGFkw61zdGljYXNcbiAgICB0aGlzLnNldHVwQ2FjaGVFdmVudHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBDYWNoZUV2ZW50cygpIHtcbiAgICAvLyBDb25maWd1cmFyIGV2ZW50b3MgcGFyYSBjYWRhIGNhY2jDqVxuICAgIGNvbnN0IGNhY2hlcyA9IFtcbiAgICAgIHsgbmFtZTogJ3N0YXRpb25zJywgaW5zdGFuY2U6IHN0YXRpb25zQ2FjaGUgfSxcbiAgICAgIHsgbmFtZTogJ3Byb2dyYW1zJywgaW5zdGFuY2U6IHByb2dyYW1zQ2FjaGUgfSxcbiAgICAgIHsgbmFtZTogJ2N1cnJlbnRQcm9ncmFtJywgaW5zdGFuY2U6IGN1cnJlbnRQcm9ncmFtQ2FjaGUgfSxcbiAgICAgIHsgbmFtZTogJ2ltYWdlcycsIGluc3RhbmNlOiBpbWFnZXNDYWNoZSB9XG4gICAgXTtcblxuICAgIGNhY2hlcy5mb3JFYWNoKCh7IG5hbWUsIGluc3RhbmNlIH0pID0+IHtcbiAgICAgIGluc3RhbmNlLm9uKCdoaXQnLCAoKSA9PiB0aGlzLnJlY29yZEhpdChuYW1lKSk7XG4gICAgICBpbnN0YW5jZS5vbignbWlzcycsICgpID0+IHRoaXMucmVjb3JkTWlzcyhuYW1lKSk7XG4gICAgICBpbnN0YW5jZS5vbignc2V0JywgKCkgPT4gdGhpcy5yZWNvcmRTZXQobmFtZSkpO1xuICAgICAgaW5zdGFuY2Uub24oJ2RlbCcsICgpID0+IHRoaXMucmVjb3JkRGVsZXRlKG5hbWUpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkSGl0KGNhY2hlTmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLnN0YXRzLmdldChjYWNoZU5hbWUpITtcbiAgICBzdGF0cy5oaXRzKys7XG4gICAgdGhpcy51cGRhdGVIaXRSYXRlKGNhY2hlTmFtZSk7XG4gIH1cblxuICBwcml2YXRlIHJlY29yZE1pc3MoY2FjaGVOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdGF0cyA9IHRoaXMuc3RhdHMuZ2V0KGNhY2hlTmFtZSkhO1xuICAgIHN0YXRzLm1pc3NlcysrO1xuICAgIHRoaXMudXBkYXRlSGl0UmF0ZShjYWNoZU5hbWUpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNvcmRTZXQoY2FjaGVOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdGF0cyA9IHRoaXMuc3RhdHMuZ2V0KGNhY2hlTmFtZSkhO1xuICAgIHN0YXRzLnNldHMrKztcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkRGVsZXRlKGNhY2hlTmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLnN0YXRzLmdldChjYWNoZU5hbWUpITtcbiAgICBzdGF0cy5kZWxldGVzKys7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUhpdFJhdGUoY2FjaGVOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdGF0cyA9IHRoaXMuc3RhdHMuZ2V0KGNhY2hlTmFtZSkhO1xuICAgIGNvbnN0IHRvdGFsID0gc3RhdHMuaGl0cyArIHN0YXRzLm1pc3NlcztcbiAgICBzdGF0cy5oaXRSYXRlID0gdG90YWwgPiAwID8gKHN0YXRzLmhpdHMgLyB0b3RhbCkgKiAxMDAgOiAwO1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgcMO6YmxpY29zIHBhcmEgb2J0ZW5lciBlc3RhZMOtc3RpY2FzXG4gIGdldFN0YXRzKGNhY2hlTmFtZT86IHN0cmluZyk6IENhY2hlU3RhdHMgfCBNYXA8c3RyaW5nLCBDYWNoZVN0YXRzPiB7XG4gICAgaWYgKGNhY2hlTmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdHMuZ2V0KGNhY2hlTmFtZSkhO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0cztcbiAgfVxuXG4gIC8vIExpbXBpYXIgdG9kb3MgbG9zIGNhY2jDqXNcbiAgY2xlYXJBbGwoKSB7XG4gICAgc3RhdGlvbnNDYWNoZS5mbHVzaEFsbCgpO1xuICAgIHByb2dyYW1zQ2FjaGUuZmx1c2hBbGwoKTtcbiAgICBjdXJyZW50UHJvZ3JhbUNhY2hlLmZsdXNoQWxsKCk7XG4gICAgaW1hZ2VzQ2FjaGUuZmx1c2hBbGwoKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIFRvZG9zIGxvcyBjYWNow6lzIGhhbiBzaWRvIGxpbXBpYWRvcycpO1xuICB9XG5cbiAgLy8gT2J0ZW5lciBpbmZvcm1hY2nDs24gZGUgdXNvIGRlIG1lbW9yaWFcbiAgZ2V0TWVtb3J5VXNhZ2UoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXRpb25zOiB7XG4gICAgICAgIGtleXM6IHN0YXRpb25zQ2FjaGUua2V5cygpLmxlbmd0aCxcbiAgICAgICAgc2l6ZTogSlNPTi5zdHJpbmdpZnkoc3RhdGlvbnNDYWNoZS5kYXRhKS5sZW5ndGhcbiAgICAgIH0sXG4gICAgICBwcm9ncmFtczoge1xuICAgICAgICBrZXlzOiBwcm9ncmFtc0NhY2hlLmtleXMoKS5sZW5ndGgsXG4gICAgICAgIHNpemU6IEpTT04uc3RyaW5naWZ5KHByb2dyYW1zQ2FjaGUuZGF0YSkubGVuZ3RoXG4gICAgICB9LFxuICAgICAgY3VycmVudFByb2dyYW06IHtcbiAgICAgICAga2V5czogY3VycmVudFByb2dyYW1DYWNoZS5rZXlzKCkubGVuZ3RoLFxuICAgICAgICBzaXplOiBKU09OLnN0cmluZ2lmeShjdXJyZW50UHJvZ3JhbUNhY2hlLmRhdGEpLmxlbmd0aFxuICAgICAgfSxcbiAgICAgIGltYWdlczoge1xuICAgICAgICBrZXlzOiBpbWFnZXNDYWNoZS5rZXlzKCkubGVuZ3RoLFxuICAgICAgICBzaXplOiBKU09OLnN0cmluZ2lmeShpbWFnZXNDYWNoZS5kYXRhKS5sZW5ndGhcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbi8vIEluc3RhbmNpYSDDum5pY2EgZGVsIG1hbmFnZXJcbmV4cG9ydCBjb25zdCBjYWNoZU1hbmFnZXIgPSBuZXcgQ2FjaGVNYW5hZ2VyKCk7XG5cbi8vIEZ1bmNpb25lcyBkZSBjYWNow6kgZXNwZWPDrWZpY2FzXG5cbi8vIENhY2hlIGRlIGVzdGFjaW9uZXNcbmV4cG9ydCBjb25zdCBzdGF0aW9uc0NhY2hlVXRpbHMgPSB7XG4gIGdldDogKGtleTogc3RyaW5nKTogYW55ID0+IHN0YXRpb25zQ2FjaGUuZ2V0KGtleSksXG4gIHNldDogKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCB0dGw/OiBudW1iZXIpOiBib29sZWFuID0+IFxuICAgIHN0YXRpb25zQ2FjaGUuc2V0KGtleSwgdmFsdWUsIHR0bCB8fCBjYWNoZUNvbmZpZy5zdGF0aW9ucy5zdGRUVEwpLFxuICBkZWw6IChrZXk6IHN0cmluZyk6IG51bWJlciA9PiBzdGF0aW9uc0NhY2hlLmRlbChrZXkpLFxuICBoYXM6IChrZXk6IHN0cmluZyk6IGJvb2xlYW4gPT4gc3RhdGlvbnNDYWNoZS5oYXMoa2V5KSxcbiAgZmx1c2g6ICgpOiB2b2lkID0+IHN0YXRpb25zQ2FjaGUuZmx1c2hBbGwoKVxufTtcblxuLy8gQ2FjaGUgZGUgcHJvZ3JhbWFzXG5leHBvcnQgY29uc3QgcHJvZ3JhbXNDYWNoZVV0aWxzID0ge1xuICBnZXQ6IChrZXk6IHN0cmluZyk6IGFueSA9PiBwcm9ncmFtc0NhY2hlLmdldChrZXkpLFxuICBzZXQ6IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgdHRsPzogbnVtYmVyKTogYm9vbGVhbiA9PiBcbiAgICBwcm9ncmFtc0NhY2hlLnNldChrZXksIHZhbHVlLCB0dGwgfHwgY2FjaGVDb25maWcucHJvZ3JhbXMuc3RkVFRMKSxcbiAgZGVsOiAoa2V5OiBzdHJpbmcpOiBudW1iZXIgPT4gcHJvZ3JhbXNDYWNoZS5kZWwoa2V5KSxcbiAgaGFzOiAoa2V5OiBzdHJpbmcpOiBib29sZWFuID0+IHByb2dyYW1zQ2FjaGUuaGFzKGtleSksXG4gIGZsdXNoOiAoKTogdm9pZCA9PiBwcm9ncmFtc0NhY2hlLmZsdXNoQWxsKCksXG4gIFxuICAvLyBNw6l0b2RvIGVzcGVjaWFsIHBhcmEgaW52YWxpZGFyIHByb2dyYW1hcyBkZSB1bmEgZXN0YWNpw7NuXG4gIGludmFsaWRhdGVTdGF0aW9uOiAoc3RhdGlvbklkOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICBjb25zdCBrZXlzID0gcHJvZ3JhbXNDYWNoZS5rZXlzKCk7XG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoa2V5LmluY2x1ZGVzKHN0YXRpb25JZCkpIHtcbiAgICAgICAgcHJvZ3JhbXNDYWNoZS5kZWwoa2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLy8gQ2FjaGUgZGUgcHJvZ3JhbWEgYWN0dWFsXG5leHBvcnQgY29uc3QgY3VycmVudFByb2dyYW1DYWNoZVV0aWxzID0ge1xuICBnZXQ6IChzdGF0aW9uSWQ6IHN0cmluZyk6IGFueSA9PiBjdXJyZW50UHJvZ3JhbUNhY2hlLmdldChgY3VycmVudF8ke3N0YXRpb25JZH1gKSxcbiAgc2V0OiAoc3RhdGlvbklkOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBib29sZWFuID0+IFxuICAgIGN1cnJlbnRQcm9ncmFtQ2FjaGUuc2V0KGBjdXJyZW50XyR7c3RhdGlvbklkfWAsIHZhbHVlKSxcbiAgZGVsOiAoc3RhdGlvbklkOiBzdHJpbmcpOiBudW1iZXIgPT4gY3VycmVudFByb2dyYW1DYWNoZS5kZWwoYGN1cnJlbnRfJHtzdGF0aW9uSWR9YCksXG4gIGhhczogKHN0YXRpb25JZDogc3RyaW5nKTogYm9vbGVhbiA9PiBjdXJyZW50UHJvZ3JhbUNhY2hlLmhhcyhgY3VycmVudF8ke3N0YXRpb25JZH1gKSxcbiAgZmx1c2g6ICgpOiB2b2lkID0+IGN1cnJlbnRQcm9ncmFtQ2FjaGUuZmx1c2hBbGwoKVxufTtcblxuLy8gQ2FjaGUgZGUgaW3DoWdlbmVzIHByb2Nlc2FkYXNcbmV4cG9ydCBjb25zdCBpbWFnZXNDYWNoZVV0aWxzID0ge1xuICBnZXQ6ICh1cmw6IHN0cmluZyk6IGFueSA9PiBpbWFnZXNDYWNoZS5nZXQodXJsKSxcbiAgc2V0OiAodXJsOiBzdHJpbmcsIHZhbHVlOiBhbnksIHR0bD86IG51bWJlcik6IGJvb2xlYW4gPT4gXG4gICAgaW1hZ2VzQ2FjaGUuc2V0KHVybCwgdmFsdWUsIHR0bCB8fCBjYWNoZUNvbmZpZy5pbWFnZXMuc3RkVFRMKSxcbiAgZGVsOiAodXJsOiBzdHJpbmcpOiBudW1iZXIgPT4gaW1hZ2VzQ2FjaGUuZGVsKHVybCksXG4gIGhhczogKHVybDogc3RyaW5nKTogYm9vbGVhbiA9PiBpbWFnZXNDYWNoZS5oYXModXJsKSxcbiAgZmx1c2g6ICgpOiB2b2lkID0+IGltYWdlc0NhY2hlLmZsdXNoQWxsKClcbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgcHJlY2FsZW50YXIgZWwgY2FjaMOpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FybVVwQ2FjaGUoKSB7XG4gIGNvbnNvbGUubG9nKCfwn5SlIENhbGVudGFuZG8gY2FjaMOpLi4uJyk7XG4gIFxuICB0cnkge1xuICAgIC8vIEFxdcOtIHB1ZWRlcyBhZ3JlZ2FyIGzDs2dpY2EgcGFyYSBwcmVjYXJnYXIgZGF0b3MgaW1wb3J0YW50ZXNcbiAgICAvLyBQb3IgZWplbXBsbywgY2FyZ2FyIHRvZGFzIGxhcyBlc3RhY2lvbmVzXG4gICAgY29uc3QgeyBnZXRTdGF0aW9ucyB9ID0gYXdhaXQgaW1wb3J0KCcuL2RhdGFNYW5hZ2VyJyk7XG4gICAgY29uc3Qgc3RhdGlvbnMgPSBhd2FpdCBnZXRTdGF0aW9ucygpO1xuICAgIHN0YXRpb25zQ2FjaGVVdGlscy5zZXQoJ2FsbF9zdGF0aW9ucycsIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogc3RhdGlvbnMgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBDYWNow6kgcHJlY2FsZW50YWRvIGV4aXRvc2FtZW50ZScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBwcmVjYWxlbnRhbmRvIGNhY2jDqTonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gRXhwb3J0YXIgbGEgaW5zdGFuY2lhIHByaW5jaXBhbCBwYXJhIHVzbyBkaXJlY3RvIHNpIGVzIG5lY2VzYXJpb1xuZXhwb3J0IHsgc3RhdGlvbnNDYWNoZSwgcHJvZ3JhbXNDYWNoZSwgY3VycmVudFByb2dyYW1DYWNoZSwgaW1hZ2VzQ2FjaGUgfTsiXSwibmFtZXMiOlsiTm9kZUNhY2hlIiwiY2FjaGVDb25maWciLCJzdGF0aW9ucyIsInN0ZFRUTCIsImNoZWNrcGVyaW9kIiwicHJvZ3JhbXMiLCJjdXJyZW50UHJvZ3JhbSIsImltYWdlcyIsInN0YXRpb25zQ2FjaGUiLCJwcm9ncmFtc0NhY2hlIiwiY3VycmVudFByb2dyYW1DYWNoZSIsImltYWdlc0NhY2hlIiwiQ2FjaGVNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJzdGF0cyIsIk1hcCIsImZvckVhY2giLCJjYWNoZSIsInNldCIsImhpdHMiLCJtaXNzZXMiLCJzZXRzIiwiZGVsZXRlcyIsImhpdFJhdGUiLCJzZXR1cENhY2hlRXZlbnRzIiwiY2FjaGVzIiwibmFtZSIsImluc3RhbmNlIiwib24iLCJyZWNvcmRIaXQiLCJyZWNvcmRNaXNzIiwicmVjb3JkU2V0IiwicmVjb3JkRGVsZXRlIiwiY2FjaGVOYW1lIiwiZ2V0IiwidXBkYXRlSGl0UmF0ZSIsInRvdGFsIiwiZ2V0U3RhdHMiLCJjbGVhckFsbCIsImZsdXNoQWxsIiwiY29uc29sZSIsImxvZyIsImdldE1lbW9yeVVzYWdlIiwia2V5cyIsImxlbmd0aCIsInNpemUiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNhY2hlTWFuYWdlciIsInN0YXRpb25zQ2FjaGVVdGlscyIsImtleSIsInZhbHVlIiwidHRsIiwiZGVsIiwiaGFzIiwiZmx1c2giLCJwcm9ncmFtc0NhY2hlVXRpbHMiLCJpbnZhbGlkYXRlU3RhdGlvbiIsInN0YXRpb25JZCIsImluY2x1ZGVzIiwiY3VycmVudFByb2dyYW1DYWNoZVV0aWxzIiwiaW1hZ2VzQ2FjaGVVdGlscyIsInVybCIsIndhcm1VcENhY2hlIiwiZ2V0U3RhdGlvbnMiLCJzdWNjZXNzIiwiZXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/cache.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/dataManager.ts":
/*!********************************!*\
  !*** ./src/lib/dataManager.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProgram: () => (/* binding */ createProgram),\n/* harmony export */   createStation: () => (/* binding */ createStation),\n/* harmony export */   deleteProgram: () => (/* binding */ deleteProgram),\n/* harmony export */   deleteStation: () => (/* binding */ deleteStation),\n/* harmony export */   getCurrentProgram: () => (/* binding */ getCurrentProgram),\n/* harmony export */   getPrograms: () => (/* binding */ getPrograms),\n/* harmony export */   getProgramsByStation: () => (/* binding */ getProgramsByStation),\n/* harmony export */   getStations: () => (/* binding */ getStations),\n/* harmony export */   readData: () => (/* binding */ readData),\n/* harmony export */   updateProgram: () => (/* binding */ updateProgram),\n/* harmony export */   updateStation: () => (/* binding */ updateStation),\n/* harmony export */   writeData: () => (/* binding */ writeData)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cache */ \"(rsc)/./src/lib/cache.ts\");\n// src/lib/dataManager.ts - VERSIÓN COMPLETA CON CACHÉ\n\n\n\nconst DATA_FILE = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'data.json');\n// Cache para el archivo completo (5 minutos)\nlet fileCache = {\n    data: null,\n    timestamp: 0\n};\nconst FILE_CACHE_TTL = 5 * 60 * 1000; // 5 minutos\n// Función auxiliar para comparar horas en formato \"HH:MM\"\nfunction compareTimeStrings(time1, time2) {\n    const [hours1, minutes1] = time1.split(':').map(Number);\n    const [hours2, minutes2] = time2.split(':').map(Number);\n    if (hours1 !== hours2) {\n        return hours1 - hours2;\n    }\n    return minutes1 - minutes2;\n}\n// Función para ordenar programas por días y horario\nfunction sortPrograms(programs) {\n    // Orden de días de la semana (comenzando con Lunes)\n    const dayOrder = {\n        'Lunes': 0,\n        'Martes': 1,\n        'Miércoles': 2,\n        'Jueves': 3,\n        'Viernes': 4,\n        'Sábado': 5,\n        'Domingo': 6\n    };\n    return [\n        ...programs\n    ].sort((a, b)=>{\n        // Primero ordenar por el primer día de emisión\n        const firstDayA = a.days[0] || '';\n        const firstDayB = b.days[0] || '';\n        const dayComparison = dayOrder[firstDayA] - dayOrder[firstDayB];\n        if (dayComparison !== 0) {\n            return dayComparison;\n        }\n        // Si los días son iguales, ordenar por hora de inicio\n        return compareTimeStrings(a.start_time, b.start_time);\n    });\n}\n// Inicializar archivo de datos si no existe\nasync function initDataFile() {\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().access(DATA_FILE);\n    } catch  {\n        const initialData = {\n            stations: [\n                {\n                    id: \"lima\",\n                    name: \"Lima\",\n                    url: \"https://radios-player-exitosa.mediaserver.digital/exitosa.chiclayo\",\n                    image: \"/images/stations/1752245607379-f9si3p.jpg\",\n                    frequency: \"95.5 FM\",\n                    city: \"Lima, Perú\",\n                    description: \"La estación principal de Radio Exitosa en la capital del Perú\"\n                },\n                {\n                    id: \"arequipa\",\n                    name: \"Arequipa\",\n                    url: \"https://neptuno-3-audio.mediaserver.digital/e_arequipa\",\n                    image: \"/images/stations/1752245619584-g4ffj.jpg\",\n                    frequency: \"104.9 FM\",\n                    city: \"Arequipa, Perú\",\n                    description: \"Transmitiendo desde la Ciudad Blanca\"\n                },\n                {\n                    id: \"trujillo\",\n                    name: \"Trujillo\",\n                    url: \"https://radios-player-exitosa.mediaserver.digital/exitosa.trujillo\",\n                    image: \"/images/stations/1752245627866-a2gt25.jpg\",\n                    frequency: \"103.3 FM\",\n                    city: \"Trujillo, Perú\",\n                    description: \"La voz de la Ciudad de la Eterna Primavera\"\n                },\n                {\n                    id: \"chiclayo\",\n                    name: \"Chiclayo\",\n                    url: \"https://radios-player-exitosa.mediaserver.digital/exitosa.chiclayo\",\n                    image: \"/images/stations/1752245634342-tow063.jpg\",\n                    frequency: \"98.9 FM\",\n                    city: \"Chiclayo, Perú\",\n                    description: \"Conectando con el norte del Perú\"\n                }\n            ],\n            programs: []\n        };\n        // Agregar todos los programas para cada estación\n        const weekdayPrograms = [\n            {\n                name: \"La Hora Esotérica\",\n                host: \"Soralla De Los Angeles\",\n                start_time: \"00:00\",\n                end_time: \"01:00\"\n            },\n            {\n                name: \"Usted Tiene Derecho\",\n                host: \"Mario Camacho Perla\",\n                start_time: \"01:00\",\n                end_time: \"02:00\"\n            },\n            {\n                name: \"La Voz De Los Pueblos\",\n                host: \"Jack Miranda y Marcial De La Cruz\",\n                start_time: \"02:00\",\n                end_time: \"05:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Pedro Paredes\",\n                start_time: \"05:00\",\n                end_time: \"08:00\"\n            },\n            {\n                name: \"Hablemos Claro\",\n                host: \"Nicolás Lúcar\",\n                start_time: \"08:00\",\n                end_time: \"11:00\"\n            },\n            {\n                name: \"Exitosa Te Escucha\",\n                host: \"Katyusca Torres Aybar\",\n                start_time: \"11:00\",\n                end_time: \"14:00\"\n            },\n            {\n                name: \"Exitosa Deportes\",\n                host: \"Gonzalo Núñez, Óscar Paz y Jean Rodríguez\",\n                start_time: \"14:00\",\n                end_time: \"16:00\"\n            },\n            {\n                name: \"Contra El Tráfico\",\n                host: \"Ricardo Rondón\",\n                start_time: \"16:00\",\n                end_time: \"18:00\"\n            },\n            {\n                name: \"Médicos En Acción\",\n                host: \"Armando Massé\",\n                start_time: \"18:00\",\n                end_time: \"19:00\"\n            },\n            {\n                name: \"Informamos y Opinamos\",\n                host: \"Karina Novoa\",\n                start_time: \"19:00\",\n                end_time: \"22:00\"\n            },\n            {\n                name: \"Exitosa Noticias\",\n                host: \"Juriko Novoa\",\n                start_time: \"22:00\",\n                end_time: \"23:00\"\n            },\n            {\n                name: \"Despierta Tus Emociones\",\n                host: \"José Poicón\",\n                start_time: \"23:00\",\n                end_time: \"00:00\"\n            }\n        ];\n        const saturdayPrograms = [\n            {\n                name: \"La Hora Esotérica\",\n                host: \"Esotéricos\",\n                start_time: \"00:00\",\n                end_time: \"01:00\"\n            },\n            {\n                name: \"Educando Mis Emociones\",\n                host: \"Dra. Danila Villegas\",\n                start_time: \"01:00\",\n                end_time: \"02:00\"\n            },\n            {\n                name: \"La Voz De Los Pueblos\",\n                host: \"Jack Miranda\",\n                start_time: \"02:00\",\n                end_time: \"05:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Pedro Paredes\",\n                start_time: \"05:00\",\n                end_time: \"08:00\"\n            },\n            {\n                name: \"Hablemos Claro\",\n                host: \"Jesús Verde\",\n                start_time: \"08:00\",\n                end_time: \"11:00\"\n            },\n            {\n                name: \"Construyendo Cimientos Para El Futuro\",\n                host: \"Jose Cieza\",\n                start_time: \"11:00\",\n                end_time: \"12:00\"\n            },\n            {\n                name: \"Derrama Magisterial\",\n                host: \"Carlos Cornejo\",\n                start_time: \"12:00\",\n                end_time: \"13:00\"\n            },\n            {\n                name: \"Exitosa Deportes\",\n                host: \"Óscar Paz\",\n                start_time: \"13:00\",\n                end_time: \"15:00\"\n            },\n            {\n                name: \"Exitosa Sábado\",\n                host: \"Katyusca Torres Aybar\",\n                start_time: \"15:00\",\n                end_time: \"18:00\"\n            },\n            {\n                name: \"La Hora Del Volante\",\n                host: \"Tito Alvites\",\n                start_time: \"18:00\",\n                end_time: \"20:00\"\n            },\n            {\n                name: \"Exitosa Te Escucha\",\n                host: \"Jorge Valdez\",\n                start_time: \"20:00\",\n                end_time: \"22:00\"\n            },\n            {\n                name: \"Noche Esotérica\",\n                host: \"Vidente Hayimy\",\n                start_time: \"22:00\",\n                end_time: \"00:00\"\n            }\n        ];\n        const sundayPrograms = [\n            {\n                name: \"Noche Esotérica\",\n                host: \"Vidente Hayimy\",\n                start_time: \"00:00\",\n                end_time: \"01:00\"\n            },\n            {\n                name: \"La Voz de los Pueblos\",\n                host: \"Hierbero\",\n                start_time: \"01:00\",\n                end_time: \"02:00\"\n            },\n            {\n                name: \"La Voz de los Pueblos\",\n                host: \"Marcial de la Cruz\",\n                start_time: \"02:00\",\n                end_time: \"06:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Piura\",\n                start_time: \"06:00\",\n                end_time: \"07:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Cusco\",\n                start_time: \"07:00\",\n                end_time: \"08:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Arequipa\",\n                start_time: \"08:00\",\n                end_time: \"09:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Trujillo\",\n                start_time: \"09:00\",\n                end_time: \"10:00\"\n            },\n            {\n                name: \"En Defensa de la Verdad\",\n                host: \"Cecilia García\",\n                start_time: \"10:00\",\n                end_time: \"12:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Chiclayo\",\n                start_time: \"12:00\",\n                end_time: \"13:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Huancayo\",\n                start_time: \"13:00\",\n                end_time: \"14:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Huacho\",\n                start_time: \"14:00\",\n                end_time: \"15:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Ica\",\n                start_time: \"15:00\",\n                end_time: \"16:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Iquitos\",\n                start_time: \"16:00\",\n                end_time: \"17:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Tacna\",\n                start_time: \"17:00\",\n                end_time: \"18:00\"\n            },\n            {\n                name: \"Exitosa Perú\",\n                host: \"Tarapoto\",\n                start_time: \"18:00\",\n                end_time: \"19:00\"\n            },\n            {\n                name: \"Médicos en Acción\",\n                host: \"Daniel Bueno\",\n                start_time: \"19:00\",\n                end_time: \"21:00\"\n            },\n            {\n                name: \"Exitosa Deportes\",\n                host: \"Óscar Paz\",\n                start_time: \"21:00\",\n                end_time: \"22:00\"\n            },\n            {\n                name: \"Noche Esotérica\",\n                host: \"Vidente Hayimy\",\n                start_time: \"22:00\",\n                end_time: \"00:00\"\n            }\n        ];\n        let programId = 1;\n        // Para cada estación, agregar todos los programas\n        for (const station of initialData.stations){\n            // Programas de Lunes a Viernes\n            for (const program of weekdayPrograms){\n                initialData.programs.push({\n                    id: programId.toString(),\n                    station_id: station.id,\n                    name: program.name,\n                    host: program.host,\n                    start_time: program.start_time,\n                    end_time: program.end_time,\n                    image: '',\n                    days: [\n                        'Lunes',\n                        'Martes',\n                        'Miércoles',\n                        'Jueves',\n                        'Viernes'\n                    ]\n                });\n                programId++;\n            }\n            // Programas de Sábado\n            for (const program of saturdayPrograms){\n                initialData.programs.push({\n                    id: programId.toString(),\n                    station_id: station.id,\n                    name: program.name,\n                    host: program.host,\n                    start_time: program.start_time,\n                    end_time: program.end_time,\n                    image: '',\n                    days: [\n                        'Sábado'\n                    ]\n                });\n                programId++;\n            }\n            // Programas de Domingo\n            for (const program of sundayPrograms){\n                initialData.programs.push({\n                    id: programId.toString(),\n                    station_id: station.id,\n                    name: program.name,\n                    host: program.host,\n                    start_time: program.start_time,\n                    end_time: program.end_time,\n                    image: '',\n                    days: [\n                        'Domingo'\n                    ]\n                });\n                programId++;\n            }\n        }\n        // Ordenar los programas antes de guardarlos\n        initialData.programs = sortPrograms(initialData.programs);\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(DATA_FILE, JSON.stringify(initialData, null, 2));\n        console.log(`✅ Archivo data.json creado con ${initialData.programs.length} programas`);\n    }\n}\n// Leer datos con caché de archivo\nasync function readData() {\n    const now = Date.now();\n    // Verificar caché del archivo\n    if (fileCache.data && now - fileCache.timestamp < FILE_CACHE_TTL) {\n        console.log('📁 Datos servidos desde caché de archivo');\n        return fileCache.data;\n    }\n    console.log('📁 Leyendo datos desde archivo');\n    await initDataFile();\n    const data = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(DATA_FILE, 'utf-8');\n    const parsed = JSON.parse(data);\n    // Actualizar caché\n    fileCache = {\n        data: parsed,\n        timestamp: now\n    };\n    return parsed;\n}\n// Escribir datos e invalidar cachés\nasync function writeData(data) {\n    await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(DATA_FILE, JSON.stringify(data, null, 2));\n    // Invalidar todos los cachés relacionados\n    fileCache = {\n        data: null,\n        timestamp: 0\n    };\n    _cache__WEBPACK_IMPORTED_MODULE_2__.stationsCacheUtils.flush();\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.flush();\n    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.flush();\n    console.log('💾 Datos guardados y cachés invalidados');\n}\n// Obtener todas las estaciones (con caché)\nasync function getStations() {\n    const cacheKey = 'all_stations';\n    // Intentar obtener del caché\n    const cached = _cache__WEBPACK_IMPORTED_MODULE_2__.stationsCacheUtils.get(cacheKey);\n    if (cached) {\n        console.log('🎯 Estaciones servidas desde caché');\n        return cached;\n    }\n    // Si no está en caché, leer y cachear\n    const data = await readData();\n    _cache__WEBPACK_IMPORTED_MODULE_2__.stationsCacheUtils.set(cacheKey, data.stations);\n    return data.stations;\n}\n// Obtener todos los programas (con caché)\nasync function getPrograms() {\n    const cacheKey = 'all_programs';\n    const cached = _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.get(cacheKey);\n    if (cached) {\n        console.log('🎯 Programas servidos desde caché');\n        return cached;\n    }\n    const data = await readData();\n    const sortedPrograms = sortPrograms(data.programs);\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.set(cacheKey, sortedPrograms);\n    return sortedPrograms;\n}\n// Obtener programas por estación (con caché)\nasync function getProgramsByStation(stationId) {\n    const cacheKey = `programs_station_${stationId}`;\n    const cached = _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.get(cacheKey);\n    if (cached) {\n        console.log(`🎯 Programas de estación ${stationId} servidos desde caché`);\n        return cached;\n    }\n    const data = await readData();\n    const programs = data.programs.filter((p)=>p.station_id === stationId);\n    const sortedPrograms = sortPrograms(programs);\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.set(cacheKey, sortedPrograms);\n    return sortedPrograms;\n}\n// Obtener programa actual (con caché corto)\nasync function getCurrentProgram(stationId) {\n    // Verificar caché primero\n    const cached = _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.get(stationId);\n    if (cached !== undefined) {\n        console.log(`🎯 Programa actual de ${stationId} servido desde caché`);\n        return cached;\n    }\n    const data = await readData();\n    // Obtener hora de Perú (UTC-5)\n    const now = new Date();\n    const utc = now.getTime() + now.getTimezoneOffset() * 60000;\n    const peruTime = new Date(utc + 3600000 * -5);\n    const currentHour = peruTime.getHours();\n    const currentMinute = peruTime.getMinutes();\n    const currentTimeMinutes = currentHour * 60 + currentMinute; // Minutos desde medianoche\n    const currentDay = [\n        'Domingo',\n        'Lunes',\n        'Martes',\n        'Miércoles',\n        'Jueves',\n        'Viernes',\n        'Sábado'\n    ][peruTime.getDay()];\n    const stationPrograms = data.programs.filter((p)=>p.station_id === stationId);\n    for (const program of stationPrograms){\n        if (!program.days.includes(currentDay)) continue;\n        // Convertir tiempos a minutos desde medianoche\n        const [startHour, startMin] = program.start_time.split(':').map(Number);\n        const [endHour, endMin] = program.end_time.split(':').map(Number);\n        const startMinutes = startHour * 60 + startMin;\n        let endMinutes = endHour * 60 + endMin;\n        // Si el programa termina a las 00:00, significa que termina a medianoche (1440 minutos)\n        if (endHour === 0 && endMin === 0 && startHour >= 12) {\n            endMinutes = 24 * 60; // 1440 minutos (medianoche)\n        }\n        // Caso 1: Programa normal (no cruza medianoche)\n        if (startMinutes < endMinutes) {\n            if (currentTimeMinutes >= startMinutes && currentTimeMinutes < endMinutes) {\n                _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.set(stationId, program);\n                console.log(`💾 Programa actual de ${stationId} cacheado`);\n                return program;\n            }\n        } else if (startMinutes > endMinutes) {\n            // Si estamos después del inicio O antes del fin\n            if (currentTimeMinutes >= startMinutes || currentTimeMinutes < endMinutes) {\n                _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.set(stationId, program);\n                console.log(`💾 Programa actual de ${stationId} cacheado`);\n                return program;\n            }\n        } else if (startMinutes === endMinutes) {\n            _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.set(stationId, program);\n            console.log(`💾 Programa actual de ${stationId} cacheado`);\n            return program; // Siempre activo\n        }\n    }\n    // Si no encontramos programa para el día actual, buscar el programa del día anterior que cruza medianoche\n    if (currentTimeMinutes < 360) {\n        const yesterdayIndex = peruTime.getDay() === 0 ? 6 : peruTime.getDay() - 1;\n        const yesterdayName = [\n            'Domingo',\n            'Lunes',\n            'Martes',\n            'Miércoles',\n            'Jueves',\n            'Viernes',\n            'Sábado'\n        ][yesterdayIndex];\n        for (const program of stationPrograms){\n            if (!program.days.includes(yesterdayName)) continue;\n            const [startHour, startMin] = program.start_time.split(':').map(Number);\n            const [endHour, endMin] = program.end_time.split(':').map(Number);\n            // Solo revisar programas que empiezan tarde (después de las 20:00)\n            if (startHour >= 20) {\n                const endMinutes = endHour * 60 + endMin;\n                // Si el programa del día anterior cruza a hoy\n                if (endHour < 12 && currentTimeMinutes < endMinutes) {\n                    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.set(stationId, program);\n                    console.log(`💾 Programa actual de ${stationId} cacheado`);\n                    return program;\n                }\n            }\n        }\n    }\n    // Cachear null también para evitar búsquedas repetidas\n    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.set(stationId, null);\n    console.log(`💾 Sin programa actual para ${stationId} - cacheado como null`);\n    return null;\n}\n// Crear programa\nasync function createProgram(program) {\n    const data = await readData();\n    const newProgram = {\n        ...program,\n        id: Date.now().toString()\n    };\n    // Agregar el nuevo programa\n    data.programs.push(newProgram);\n    // Ordenar programas antes de guardar\n    data.programs = sortPrograms(data.programs);\n    await writeData(data);\n    // Invalidar cachés específicos\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del('all_programs');\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del(`programs_station_${program.station_id}`);\n    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.del(program.station_id);\n    return newProgram;\n}\n// Actualizar programa\nasync function updateProgram(id, updates) {\n    const data = await readData();\n    const index = data.programs.findIndex((p)=>p.id === id);\n    if (index === -1) throw new Error('Programa no encontrado');\n    const oldProgram = data.programs[index];\n    data.programs[index] = {\n        ...oldProgram,\n        ...updates\n    };\n    // Ordenar programas antes de guardar\n    data.programs = sortPrograms(data.programs);\n    await writeData(data);\n    // Invalidar cachés específicos\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del('all_programs');\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del(`programs_station_${oldProgram.station_id}`);\n    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.del(oldProgram.station_id);\n    // Si cambió la estación, invalidar también la nueva\n    if (updates.station_id && updates.station_id !== oldProgram.station_id) {\n        _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del(`programs_station_${updates.station_id}`);\n        _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.del(updates.station_id);\n    }\n    return data.programs[index];\n}\n// Eliminar programa\nasync function deleteProgram(id) {\n    const data = await readData();\n    const program = data.programs.find((p)=>p.id === id);\n    if (!program) throw new Error('Programa no encontrado');\n    data.programs = data.programs.filter((p)=>p.id !== id);\n    await writeData(data);\n    // Invalidar cachés específicos\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del('all_programs');\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del(`programs_station_${program.station_id}`);\n    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.del(program.station_id);\n}\n// Crear estación\nasync function createStation(stationData) {\n    const data = await readData();\n    const newStation = {\n        id: Date.now().toString(),\n        name: stationData.name || '',\n        url: stationData.url || '',\n        image: stationData.image,\n        frequency: stationData.frequency,\n        city: stationData.city,\n        description: stationData.description\n    };\n    data.stations.push(newStation);\n    await writeData(data);\n    // Invalidar caché de estaciones\n    _cache__WEBPACK_IMPORTED_MODULE_2__.stationsCacheUtils.del('all_stations');\n    return newStation;\n}\n// Actualizar estación\nasync function updateStation(id, updates) {\n    const data = await readData();\n    const index = data.stations.findIndex((s)=>s.id === id);\n    if (index === -1) throw new Error('Estación no encontrada');\n    data.stations[index] = {\n        ...data.stations[index],\n        ...updates\n    };\n    await writeData(data);\n    // Invalidar caché de estaciones\n    _cache__WEBPACK_IMPORTED_MODULE_2__.stationsCacheUtils.del('all_stations');\n    return data.stations[index];\n}\n// Eliminar estación\nasync function deleteStation(id) {\n    const data = await readData();\n    // Eliminar la estación\n    data.stations = data.stations.filter((s)=>s.id !== id);\n    // Eliminar todos los programas de esa estación\n    data.programs = data.programs.filter((p)=>p.station_id !== id);\n    await writeData(data);\n    // Invalidar todos los cachés relacionados\n    _cache__WEBPACK_IMPORTED_MODULE_2__.stationsCacheUtils.del('all_stations');\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del('all_programs');\n    _cache__WEBPACK_IMPORTED_MODULE_2__.programsCacheUtils.del(`programs_station_${id}`);\n    _cache__WEBPACK_IMPORTED_MODULE_2__.currentProgramCacheUtils.del(id);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDd0UsTUFBTTtBQUM3QjtBQUVBLG9CQUFvQjtBQUNiLGVBQWVXLGNBQWNsRixFQUFVO0lBQzVDLE1BQU01QixPQUFPLE1BQU1vRDtJQUNuQix1QkFBdUI7SUFDdkJwRCxLQUFLMkIsUUFBUSxHQUFHM0IsS0FBSzJCLFFBQVEsQ0FBQzBDLE1BQU0sQ0FBQ3dDLENBQUFBLElBQUtBLEVBQUVqRixFQUFFLEtBQUtBO0lBQ25ELCtDQUErQztJQUMvQzVCLEtBQUtjLFFBQVEsR0FBR2QsS0FBS2MsUUFBUSxDQUFDdUQsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFekIsVUFBVSxLQUFLakI7SUFDM0QsTUFBTThCLFVBQVUxRDtJQUVoQiwwQ0FBMEM7SUFDMUNSLHNEQUFrQkEsQ0FBQ3dHLEdBQUcsQ0FBQztJQUN2QnZHLHNEQUFrQkEsQ0FBQ3VHLEdBQUcsQ0FBQztJQUN2QnZHLHNEQUFrQkEsQ0FBQ3VHLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFcEUsSUFBSTtJQUMvQ2xDLDREQUF3QkEsQ0FBQ3NHLEdBQUcsQ0FBQ3BFO0FBQy9CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVTVUFSSU9cXERlc2t0b3BcXEFQUC1FWElUT1NBMjAyNlxcc3JjXFxsaWJcXGRhdGFNYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvZGF0YU1hbmFnZXIudHMgLSBWRVJTScOTTiBDT01QTEVUQSBDT04gQ0FDSMOJXG5pbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBcbiAgc3RhdGlvbnNDYWNoZVV0aWxzLCBcbiAgcHJvZ3JhbXNDYWNoZVV0aWxzLCBcbiAgY3VycmVudFByb2dyYW1DYWNoZVV0aWxzIFxufSBmcm9tICcuL2NhY2hlJztcblxuY29uc3QgREFUQV9GSUxFID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhLmpzb24nKTtcblxuZXhwb3J0IGludGVyZmFjZSBTdGF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIGZyZXF1ZW5jeT86IHN0cmluZztcbiAgY2l0eT86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZ3JhbSB7XG4gIGlkOiBzdHJpbmc7XG4gIHN0YXRpb25faWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBob3N0OiBzdHJpbmc7XG4gIHN0YXJ0X3RpbWU6IHN0cmluZztcbiAgZW5kX3RpbWU6IHN0cmluZztcbiAgaW1hZ2U6IHN0cmluZztcbiAgZGF5czogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFkaW9EYXRhIHtcbiAgc3RhdGlvbnM6IFN0YXRpb25bXTtcbiAgcHJvZ3JhbXM6IFByb2dyYW1bXTtcbn1cblxuLy8gQ2FjaGUgcGFyYSBlbCBhcmNoaXZvIGNvbXBsZXRvICg1IG1pbnV0b3MpXG5sZXQgZmlsZUNhY2hlOiB7IGRhdGE6IFJhZGlvRGF0YSB8IG51bGw7IHRpbWVzdGFtcDogbnVtYmVyIH0gPSB7XG4gIGRhdGE6IG51bGwsXG4gIHRpbWVzdGFtcDogMFxufTtcbmNvbnN0IEZJTEVfQ0FDSEVfVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dG9zXG5cbi8vIEZ1bmNpw7NuIGF1eGlsaWFyIHBhcmEgY29tcGFyYXIgaG9yYXMgZW4gZm9ybWF0byBcIkhIOk1NXCJcbmZ1bmN0aW9uIGNvbXBhcmVUaW1lU3RyaW5ncyh0aW1lMTogc3RyaW5nLCB0aW1lMjogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgW2hvdXJzMSwgbWludXRlczFdID0gdGltZTEuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgY29uc3QgW2hvdXJzMiwgbWludXRlczJdID0gdGltZTIuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgXG4gIGlmIChob3VyczEgIT09IGhvdXJzMikge1xuICAgIHJldHVybiBob3VyczEgLSBob3VyczI7XG4gIH1cbiAgXG4gIHJldHVybiBtaW51dGVzMSAtIG1pbnV0ZXMyO1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIG9yZGVuYXIgcHJvZ3JhbWFzIHBvciBkw61hcyB5IGhvcmFyaW9cbmZ1bmN0aW9uIHNvcnRQcm9ncmFtcyhwcm9ncmFtczogUHJvZ3JhbVtdKTogUHJvZ3JhbVtdIHtcbiAgLy8gT3JkZW4gZGUgZMOtYXMgZGUgbGEgc2VtYW5hIChjb21lbnphbmRvIGNvbiBMdW5lcylcbiAgY29uc3QgZGF5T3JkZXI6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7XG4gICAgJ0x1bmVzJzogMCxcbiAgICAnTWFydGVzJzogMSxcbiAgICAnTWnDqXJjb2xlcyc6IDIsXG4gICAgJ0p1ZXZlcyc6IDMsXG4gICAgJ1ZpZXJuZXMnOiA0LFxuICAgICdTw6FiYWRvJzogNSxcbiAgICAnRG9taW5nbyc6IDZcbiAgfTtcblxuICByZXR1cm4gWy4uLnByb2dyYW1zXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgLy8gUHJpbWVybyBvcmRlbmFyIHBvciBlbCBwcmltZXIgZMOtYSBkZSBlbWlzacOzblxuICAgIGNvbnN0IGZpcnN0RGF5QSA9IGEuZGF5c1swXSB8fCAnJztcbiAgICBjb25zdCBmaXJzdERheUIgPSBiLmRheXNbMF0gfHwgJyc7XG4gICAgXG4gICAgY29uc3QgZGF5Q29tcGFyaXNvbiA9IGRheU9yZGVyW2ZpcnN0RGF5QV0gLSBkYXlPcmRlcltmaXJzdERheUJdO1xuICAgIGlmIChkYXlDb21wYXJpc29uICE9PSAwKSB7XG4gICAgICByZXR1cm4gZGF5Q29tcGFyaXNvbjtcbiAgICB9XG4gICAgXG4gICAgLy8gU2kgbG9zIGTDrWFzIHNvbiBpZ3VhbGVzLCBvcmRlbmFyIHBvciBob3JhIGRlIGluaWNpb1xuICAgIHJldHVybiBjb21wYXJlVGltZVN0cmluZ3MoYS5zdGFydF90aW1lLCBiLnN0YXJ0X3RpbWUpO1xuICB9KTtcbn1cblxuLy8gSW5pY2lhbGl6YXIgYXJjaGl2byBkZSBkYXRvcyBzaSBubyBleGlzdGVcbmFzeW5jIGZ1bmN0aW9uIGluaXREYXRhRmlsZSgpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmcy5hY2Nlc3MoREFUQV9GSUxFKTtcbiAgfSBjYXRjaCB7XG4gICAgY29uc3QgaW5pdGlhbERhdGE6IFJhZGlvRGF0YSA9IHtcbiAgICAgIHN0YXRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJsaW1hXCIsXG4gICAgICAgICAgbmFtZTogXCJMaW1hXCIsXG4gICAgICAgICAgdXJsOiBcImh0dHBzOi8vcmFkaW9zLXBsYXllci1leGl0b3NhLm1lZGlhc2VydmVyLmRpZ2l0YWwvZXhpdG9zYS5jaGljbGF5b1wiLFxuICAgICAgICAgIGltYWdlOiBcIi9pbWFnZXMvc3RhdGlvbnMvMTc1MjI0NTYwNzM3OS1mOXNpM3AuanBnXCIsXG4gICAgICAgICAgZnJlcXVlbmN5OiBcIjk1LjUgRk1cIixcbiAgICAgICAgICBjaXR5OiBcIkxpbWEsIFBlcsO6XCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiTGEgZXN0YWNpw7NuIHByaW5jaXBhbCBkZSBSYWRpbyBFeGl0b3NhIGVuIGxhIGNhcGl0YWwgZGVsIFBlcsO6XCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcImFyZXF1aXBhXCIsXG4gICAgICAgICAgbmFtZTogXCJBcmVxdWlwYVwiLFxuICAgICAgICAgIHVybDogXCJodHRwczovL25lcHR1bm8tMy1hdWRpby5tZWRpYXNlcnZlci5kaWdpdGFsL2VfYXJlcXVpcGFcIixcbiAgICAgICAgICBpbWFnZTogXCIvaW1hZ2VzL3N0YXRpb25zLzE3NTIyNDU2MTk1ODQtZzRmZmouanBnXCIsXG4gICAgICAgICAgZnJlcXVlbmN5OiBcIjEwNC45IEZNXCIsXG4gICAgICAgICAgY2l0eTogXCJBcmVxdWlwYSwgUGVyw7pcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUcmFuc21pdGllbmRvIGRlc2RlIGxhIENpdWRhZCBCbGFuY2FcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwidHJ1amlsbG9cIixcbiAgICAgICAgICBuYW1lOiBcIlRydWppbGxvXCIsXG4gICAgICAgICAgdXJsOiBcImh0dHBzOi8vcmFkaW9zLXBsYXllci1leGl0b3NhLm1lZGlhc2VydmVyLmRpZ2l0YWwvZXhpdG9zYS50cnVqaWxsb1wiLFxuICAgICAgICAgIGltYWdlOiBcIi9pbWFnZXMvc3RhdGlvbnMvMTc1MjI0NTYyNzg2Ni1hMmd0MjUuanBnXCIsXG4gICAgICAgICAgZnJlcXVlbmN5OiBcIjEwMy4zIEZNXCIsXG4gICAgICAgICAgY2l0eTogXCJUcnVqaWxsbywgUGVyw7pcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJMYSB2b3ogZGUgbGEgQ2l1ZGFkIGRlIGxhIEV0ZXJuYSBQcmltYXZlcmFcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiY2hpY2xheW9cIixcbiAgICAgICAgICBuYW1lOiBcIkNoaWNsYXlvXCIsXG4gICAgICAgICAgdXJsOiBcImh0dHBzOi8vcmFkaW9zLXBsYXllci1leGl0b3NhLm1lZGlhc2VydmVyLmRpZ2l0YWwvZXhpdG9zYS5jaGljbGF5b1wiLFxuICAgICAgICAgIGltYWdlOiBcIi9pbWFnZXMvc3RhdGlvbnMvMTc1MjI0NTYzNDM0Mi10b3cwNjMuanBnXCIsXG4gICAgICAgICAgZnJlcXVlbmN5OiBcIjk4LjkgRk1cIixcbiAgICAgICAgICBjaXR5OiBcIkNoaWNsYXlvLCBQZXLDulwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbmVjdGFuZG8gY29uIGVsIG5vcnRlIGRlbCBQZXLDulwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBwcm9ncmFtczogW11cbiAgICB9O1xuICAgIFxuICAgIC8vIEFncmVnYXIgdG9kb3MgbG9zIHByb2dyYW1hcyBwYXJhIGNhZGEgZXN0YWNpw7NuXG4gICAgY29uc3Qgd2Vla2RheVByb2dyYW1zID0gW1xuICAgICAgeyBuYW1lOiBcIkxhIEhvcmEgRXNvdMOpcmljYVwiLCBob3N0OiBcIlNvcmFsbGEgRGUgTG9zIEFuZ2VsZXNcIiwgc3RhcnRfdGltZTogXCIwMDowMFwiLCBlbmRfdGltZTogXCIwMTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiVXN0ZWQgVGllbmUgRGVyZWNob1wiLCBob3N0OiBcIk1hcmlvIENhbWFjaG8gUGVybGFcIiwgc3RhcnRfdGltZTogXCIwMTowMFwiLCBlbmRfdGltZTogXCIwMjowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiTGEgVm96IERlIExvcyBQdWVibG9zXCIsIGhvc3Q6IFwiSmFjayBNaXJhbmRhIHkgTWFyY2lhbCBEZSBMYSBDcnV6XCIsIHN0YXJ0X3RpbWU6IFwiMDI6MDBcIiwgZW5kX3RpbWU6IFwiMDU6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkV4aXRvc2EgUGVyw7pcIiwgaG9zdDogXCJQZWRybyBQYXJlZGVzXCIsIHN0YXJ0X3RpbWU6IFwiMDU6MDBcIiwgZW5kX3RpbWU6IFwiMDg6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkhhYmxlbW9zIENsYXJvXCIsIGhvc3Q6IFwiTmljb2zDoXMgTMO6Y2FyXCIsIHN0YXJ0X3RpbWU6IFwiMDg6MDBcIiwgZW5kX3RpbWU6IFwiMTE6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkV4aXRvc2EgVGUgRXNjdWNoYVwiLCBob3N0OiBcIkthdHl1c2NhIFRvcnJlcyBBeWJhclwiLCBzdGFydF90aW1lOiBcIjExOjAwXCIsIGVuZF90aW1lOiBcIjE0OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFeGl0b3NhIERlcG9ydGVzXCIsIGhvc3Q6IFwiR29uemFsbyBOw7rDsWV6LCDDk3NjYXIgUGF6IHkgSmVhbiBSb2Ryw61ndWV6XCIsIHN0YXJ0X3RpbWU6IFwiMTQ6MDBcIiwgZW5kX3RpbWU6IFwiMTY6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkNvbnRyYSBFbCBUcsOhZmljb1wiLCBob3N0OiBcIlJpY2FyZG8gUm9uZMOzblwiLCBzdGFydF90aW1lOiBcIjE2OjAwXCIsIGVuZF90aW1lOiBcIjE4OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJNw6lkaWNvcyBFbiBBY2Npw7NuXCIsIGhvc3Q6IFwiQXJtYW5kbyBNYXNzw6lcIiwgc3RhcnRfdGltZTogXCIxODowMFwiLCBlbmRfdGltZTogXCIxOTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiSW5mb3JtYW1vcyB5IE9waW5hbW9zXCIsIGhvc3Q6IFwiS2FyaW5hIE5vdm9hXCIsIHN0YXJ0X3RpbWU6IFwiMTk6MDBcIiwgZW5kX3RpbWU6IFwiMjI6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkV4aXRvc2EgTm90aWNpYXNcIiwgaG9zdDogXCJKdXJpa28gTm92b2FcIiwgc3RhcnRfdGltZTogXCIyMjowMFwiLCBlbmRfdGltZTogXCIyMzowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRGVzcGllcnRhIFR1cyBFbW9jaW9uZXNcIiwgaG9zdDogXCJKb3PDqSBQb2ljw7NuXCIsIHN0YXJ0X3RpbWU6IFwiMjM6MDBcIiwgZW5kX3RpbWU6IFwiMDA6MDBcIiB9XG4gICAgXTtcblxuICAgIGNvbnN0IHNhdHVyZGF5UHJvZ3JhbXMgPSBbXG4gICAgICB7IG5hbWU6IFwiTGEgSG9yYSBFc290w6lyaWNhXCIsIGhvc3Q6IFwiRXNvdMOpcmljb3NcIiwgc3RhcnRfdGltZTogXCIwMDowMFwiLCBlbmRfdGltZTogXCIwMTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRWR1Y2FuZG8gTWlzIEVtb2Npb25lc1wiLCBob3N0OiBcIkRyYS4gRGFuaWxhIFZpbGxlZ2FzXCIsIHN0YXJ0X3RpbWU6IFwiMDE6MDBcIiwgZW5kX3RpbWU6IFwiMDI6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkxhIFZveiBEZSBMb3MgUHVlYmxvc1wiLCBob3N0OiBcIkphY2sgTWlyYW5kYVwiLCBzdGFydF90aW1lOiBcIjAyOjAwXCIsIGVuZF90aW1lOiBcIjA1OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFeGl0b3NhIFBlcsO6XCIsIGhvc3Q6IFwiUGVkcm8gUGFyZWRlc1wiLCBzdGFydF90aW1lOiBcIjA1OjAwXCIsIGVuZF90aW1lOiBcIjA4OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJIYWJsZW1vcyBDbGFyb1wiLCBob3N0OiBcIkplc8O6cyBWZXJkZVwiLCBzdGFydF90aW1lOiBcIjA4OjAwXCIsIGVuZF90aW1lOiBcIjExOjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJDb25zdHJ1eWVuZG8gQ2ltaWVudG9zIFBhcmEgRWwgRnV0dXJvXCIsIGhvc3Q6IFwiSm9zZSBDaWV6YVwiLCBzdGFydF90aW1lOiBcIjExOjAwXCIsIGVuZF90aW1lOiBcIjEyOjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJEZXJyYW1hIE1hZ2lzdGVyaWFsXCIsIGhvc3Q6IFwiQ2FybG9zIENvcm5lam9cIiwgc3RhcnRfdGltZTogXCIxMjowMFwiLCBlbmRfdGltZTogXCIxMzowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBEZXBvcnRlc1wiLCBob3N0OiBcIsOTc2NhciBQYXpcIiwgc3RhcnRfdGltZTogXCIxMzowMFwiLCBlbmRfdGltZTogXCIxNTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBTw6FiYWRvXCIsIGhvc3Q6IFwiS2F0eXVzY2EgVG9ycmVzIEF5YmFyXCIsIHN0YXJ0X3RpbWU6IFwiMTU6MDBcIiwgZW5kX3RpbWU6IFwiMTg6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkxhIEhvcmEgRGVsIFZvbGFudGVcIiwgaG9zdDogXCJUaXRvIEFsdml0ZXNcIiwgc3RhcnRfdGltZTogXCIxODowMFwiLCBlbmRfdGltZTogXCIyMDowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBUZSBFc2N1Y2hhXCIsIGhvc3Q6IFwiSm9yZ2UgVmFsZGV6XCIsIHN0YXJ0X3RpbWU6IFwiMjA6MDBcIiwgZW5kX3RpbWU6IFwiMjI6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIk5vY2hlIEVzb3TDqXJpY2FcIiwgaG9zdDogXCJWaWRlbnRlIEhheWlteVwiLCBzdGFydF90aW1lOiBcIjIyOjAwXCIsIGVuZF90aW1lOiBcIjAwOjAwXCIgfVxuICAgIF07XG5cbiAgICBjb25zdCBzdW5kYXlQcm9ncmFtcyA9IFtcbiAgICAgIHsgbmFtZTogXCJOb2NoZSBFc290w6lyaWNhXCIsIGhvc3Q6IFwiVmlkZW50ZSBIYXlpbXlcIiwgc3RhcnRfdGltZTogXCIwMDowMFwiLCBlbmRfdGltZTogXCIwMTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiTGEgVm96IGRlIGxvcyBQdWVibG9zXCIsIGhvc3Q6IFwiSGllcmJlcm9cIiwgc3RhcnRfdGltZTogXCIwMTowMFwiLCBlbmRfdGltZTogXCIwMjowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiTGEgVm96IGRlIGxvcyBQdWVibG9zXCIsIGhvc3Q6IFwiTWFyY2lhbCBkZSBsYSBDcnV6XCIsIHN0YXJ0X3RpbWU6IFwiMDI6MDBcIiwgZW5kX3RpbWU6IFwiMDY6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkV4aXRvc2EgUGVyw7pcIiwgaG9zdDogXCJQaXVyYVwiLCBzdGFydF90aW1lOiBcIjA2OjAwXCIsIGVuZF90aW1lOiBcIjA3OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFeGl0b3NhIFBlcsO6XCIsIGhvc3Q6IFwiQ3VzY29cIiwgc3RhcnRfdGltZTogXCIwNzowMFwiLCBlbmRfdGltZTogXCIwODowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBQZXLDulwiLCBob3N0OiBcIkFyZXF1aXBhXCIsIHN0YXJ0X3RpbWU6IFwiMDg6MDBcIiwgZW5kX3RpbWU6IFwiMDk6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkV4aXRvc2EgUGVyw7pcIiwgaG9zdDogXCJUcnVqaWxsb1wiLCBzdGFydF90aW1lOiBcIjA5OjAwXCIsIGVuZF90aW1lOiBcIjEwOjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFbiBEZWZlbnNhIGRlIGxhIFZlcmRhZFwiLCBob3N0OiBcIkNlY2lsaWEgR2FyY8OtYVwiLCBzdGFydF90aW1lOiBcIjEwOjAwXCIsIGVuZF90aW1lOiBcIjEyOjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFeGl0b3NhIFBlcsO6XCIsIGhvc3Q6IFwiQ2hpY2xheW9cIiwgc3RhcnRfdGltZTogXCIxMjowMFwiLCBlbmRfdGltZTogXCIxMzowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBQZXLDulwiLCBob3N0OiBcIkh1YW5jYXlvXCIsIHN0YXJ0X3RpbWU6IFwiMTM6MDBcIiwgZW5kX3RpbWU6IFwiMTQ6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIkV4aXRvc2EgUGVyw7pcIiwgaG9zdDogXCJIdWFjaG9cIiwgc3RhcnRfdGltZTogXCIxNDowMFwiLCBlbmRfdGltZTogXCIxNTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBQZXLDulwiLCBob3N0OiBcIkljYVwiLCBzdGFydF90aW1lOiBcIjE1OjAwXCIsIGVuZF90aW1lOiBcIjE2OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFeGl0b3NhIFBlcsO6XCIsIGhvc3Q6IFwiSXF1aXRvc1wiLCBzdGFydF90aW1lOiBcIjE2OjAwXCIsIGVuZF90aW1lOiBcIjE3OjAwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJFeGl0b3NhIFBlcsO6XCIsIGhvc3Q6IFwiVGFjbmFcIiwgc3RhcnRfdGltZTogXCIxNzowMFwiLCBlbmRfdGltZTogXCIxODowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBQZXLDulwiLCBob3N0OiBcIlRhcmFwb3RvXCIsIHN0YXJ0X3RpbWU6IFwiMTg6MDBcIiwgZW5kX3RpbWU6IFwiMTk6MDBcIiB9LFxuICAgICAgeyBuYW1lOiBcIk3DqWRpY29zIGVuIEFjY2nDs25cIiwgaG9zdDogXCJEYW5pZWwgQnVlbm9cIiwgc3RhcnRfdGltZTogXCIxOTowMFwiLCBlbmRfdGltZTogXCIyMTowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiRXhpdG9zYSBEZXBvcnRlc1wiLCBob3N0OiBcIsOTc2NhciBQYXpcIiwgc3RhcnRfdGltZTogXCIyMTowMFwiLCBlbmRfdGltZTogXCIyMjowMFwiIH0sXG4gICAgICB7IG5hbWU6IFwiTm9jaGUgRXNvdMOpcmljYVwiLCBob3N0OiBcIlZpZGVudGUgSGF5aW15XCIsIHN0YXJ0X3RpbWU6IFwiMjI6MDBcIiwgZW5kX3RpbWU6IFwiMDA6MDBcIiB9XG4gICAgXTtcbiAgICBcbiAgICBsZXQgcHJvZ3JhbUlkID0gMTtcbiAgICBcbiAgICAvLyBQYXJhIGNhZGEgZXN0YWNpw7NuLCBhZ3JlZ2FyIHRvZG9zIGxvcyBwcm9ncmFtYXNcbiAgICBmb3IgKGNvbnN0IHN0YXRpb24gb2YgaW5pdGlhbERhdGEuc3RhdGlvbnMpIHtcbiAgICAgIC8vIFByb2dyYW1hcyBkZSBMdW5lcyBhIFZpZXJuZXNcbiAgICAgIGZvciAoY29uc3QgcHJvZ3JhbSBvZiB3ZWVrZGF5UHJvZ3JhbXMpIHtcbiAgICAgICAgaW5pdGlhbERhdGEucHJvZ3JhbXMucHVzaCh7XG4gICAgICAgICAgaWQ6IHByb2dyYW1JZC50b1N0cmluZygpLFxuICAgICAgICAgIHN0YXRpb25faWQ6IHN0YXRpb24uaWQsXG4gICAgICAgICAgbmFtZTogcHJvZ3JhbS5uYW1lLFxuICAgICAgICAgIGhvc3Q6IHByb2dyYW0uaG9zdCxcbiAgICAgICAgICBzdGFydF90aW1lOiBwcm9ncmFtLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgZW5kX3RpbWU6IHByb2dyYW0uZW5kX3RpbWUsXG4gICAgICAgICAgaW1hZ2U6ICcnLFxuICAgICAgICAgIGRheXM6IFsnTHVuZXMnLCAnTWFydGVzJywgJ01pw6lyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnXVxuICAgICAgICB9KTtcbiAgICAgICAgcHJvZ3JhbUlkKys7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFByb2dyYW1hcyBkZSBTw6FiYWRvXG4gICAgICBmb3IgKGNvbnN0IHByb2dyYW0gb2Ygc2F0dXJkYXlQcm9ncmFtcykge1xuICAgICAgICBpbml0aWFsRGF0YS5wcm9ncmFtcy5wdXNoKHtcbiAgICAgICAgICBpZDogcHJvZ3JhbUlkLnRvU3RyaW5nKCksXG4gICAgICAgICAgc3RhdGlvbl9pZDogc3RhdGlvbi5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9ncmFtLm5hbWUsXG4gICAgICAgICAgaG9zdDogcHJvZ3JhbS5ob3N0LFxuICAgICAgICAgIHN0YXJ0X3RpbWU6IHByb2dyYW0uc3RhcnRfdGltZSxcbiAgICAgICAgICBlbmRfdGltZTogcHJvZ3JhbS5lbmRfdGltZSxcbiAgICAgICAgICBpbWFnZTogJycsXG4gICAgICAgICAgZGF5czogWydTw6FiYWRvJ11cbiAgICAgICAgfSk7XG4gICAgICAgIHByb2dyYW1JZCsrO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcm9ncmFtYXMgZGUgRG9taW5nb1xuICAgICAgZm9yIChjb25zdCBwcm9ncmFtIG9mIHN1bmRheVByb2dyYW1zKSB7XG4gICAgICAgIGluaXRpYWxEYXRhLnByb2dyYW1zLnB1c2goe1xuICAgICAgICAgIGlkOiBwcm9ncmFtSWQudG9TdHJpbmcoKSxcbiAgICAgICAgICBzdGF0aW9uX2lkOiBzdGF0aW9uLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2dyYW0ubmFtZSxcbiAgICAgICAgICBob3N0OiBwcm9ncmFtLmhvc3QsXG4gICAgICAgICAgc3RhcnRfdGltZTogcHJvZ3JhbS5zdGFydF90aW1lLFxuICAgICAgICAgIGVuZF90aW1lOiBwcm9ncmFtLmVuZF90aW1lLFxuICAgICAgICAgIGltYWdlOiAnJyxcbiAgICAgICAgICBkYXlzOiBbJ0RvbWluZ28nXVxuICAgICAgICB9KTtcbiAgICAgICAgcHJvZ3JhbUlkKys7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE9yZGVuYXIgbG9zIHByb2dyYW1hcyBhbnRlcyBkZSBndWFyZGFybG9zXG4gICAgaW5pdGlhbERhdGEucHJvZ3JhbXMgPSBzb3J0UHJvZ3JhbXMoaW5pdGlhbERhdGEucHJvZ3JhbXMpO1xuICAgIFxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShEQVRBX0ZJTEUsIEpTT04uc3RyaW5naWZ5KGluaXRpYWxEYXRhLCBudWxsLCAyKSk7XG4gICAgY29uc29sZS5sb2coYOKchSBBcmNoaXZvIGRhdGEuanNvbiBjcmVhZG8gY29uICR7aW5pdGlhbERhdGEucHJvZ3JhbXMubGVuZ3RofSBwcm9ncmFtYXNgKTtcbiAgfVxufVxuXG4vLyBMZWVyIGRhdG9zIGNvbiBjYWNow6kgZGUgYXJjaGl2b1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWREYXRhKCk6IFByb21pc2U8UmFkaW9EYXRhPiB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIFxuICAvLyBWZXJpZmljYXIgY2FjaMOpIGRlbCBhcmNoaXZvXG4gIGlmIChmaWxlQ2FjaGUuZGF0YSAmJiAobm93IC0gZmlsZUNhY2hlLnRpbWVzdGFtcCkgPCBGSUxFX0NBQ0hFX1RUTCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5OBIERhdG9zIHNlcnZpZG9zIGRlc2RlIGNhY2jDqSBkZSBhcmNoaXZvJyk7XG4gICAgcmV0dXJuIGZpbGVDYWNoZS5kYXRhO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZygn8J+TgSBMZXllbmRvIGRhdG9zIGRlc2RlIGFyY2hpdm8nKTtcbiAgYXdhaXQgaW5pdERhdGFGaWxlKCk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShEQVRBX0ZJTEUsICd1dGYtOCcpO1xuICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpO1xuICBcbiAgLy8gQWN0dWFsaXphciBjYWNow6lcbiAgZmlsZUNhY2hlID0ge1xuICAgIGRhdGE6IHBhcnNlZCxcbiAgICB0aW1lc3RhbXA6IG5vd1xuICB9O1xuICBcbiAgcmV0dXJuIHBhcnNlZDtcbn1cblxuLy8gRXNjcmliaXIgZGF0b3MgZSBpbnZhbGlkYXIgY2FjaMOpc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlRGF0YShkYXRhOiBSYWRpb0RhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgZnMud3JpdGVGaWxlKERBVEFfRklMRSwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICBcbiAgLy8gSW52YWxpZGFyIHRvZG9zIGxvcyBjYWNow6lzIHJlbGFjaW9uYWRvc1xuICBmaWxlQ2FjaGUgPSB7IGRhdGE6IG51bGwsIHRpbWVzdGFtcDogMCB9O1xuICBzdGF0aW9uc0NhY2hlVXRpbHMuZmx1c2goKTtcbiAgcHJvZ3JhbXNDYWNoZVV0aWxzLmZsdXNoKCk7XG4gIGN1cnJlbnRQcm9ncmFtQ2FjaGVVdGlscy5mbHVzaCgpO1xuICBcbiAgY29uc29sZS5sb2coJ/Cfkr4gRGF0b3MgZ3VhcmRhZG9zIHkgY2FjaMOpcyBpbnZhbGlkYWRvcycpO1xufVxuXG4vLyBPYnRlbmVyIHRvZGFzIGxhcyBlc3RhY2lvbmVzIChjb24gY2FjaMOpKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0YXRpb25zKCk6IFByb21pc2U8U3RhdGlvbltdPiB7XG4gIGNvbnN0IGNhY2hlS2V5ID0gJ2FsbF9zdGF0aW9ucyc7XG4gIFxuICAvLyBJbnRlbnRhciBvYnRlbmVyIGRlbCBjYWNow6lcbiAgY29uc3QgY2FjaGVkID0gc3RhdGlvbnNDYWNoZVV0aWxzLmdldChjYWNoZUtleSk7XG4gIGlmIChjYWNoZWQpIHtcbiAgICBjb25zb2xlLmxvZygn8J+OryBFc3RhY2lvbmVzIHNlcnZpZGFzIGRlc2RlIGNhY2jDqScpO1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgXG4gIC8vIFNpIG5vIGVzdMOhIGVuIGNhY2jDqSwgbGVlciB5IGNhY2hlYXJcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlYWREYXRhKCk7XG4gIHN0YXRpb25zQ2FjaGVVdGlscy5zZXQoY2FjaGVLZXksIGRhdGEuc3RhdGlvbnMpO1xuICByZXR1cm4gZGF0YS5zdGF0aW9ucztcbn1cblxuLy8gT2J0ZW5lciB0b2RvcyBsb3MgcHJvZ3JhbWFzIChjb24gY2FjaMOpKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2dyYW1zKCk6IFByb21pc2U8UHJvZ3JhbVtdPiB7XG4gIGNvbnN0IGNhY2hlS2V5ID0gJ2FsbF9wcm9ncmFtcyc7XG4gIFxuICBjb25zdCBjYWNoZWQgPSBwcm9ncmFtc0NhY2hlVXRpbHMuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNvbnNvbGUubG9nKCfwn46vIFByb2dyYW1hcyBzZXJ2aWRvcyBkZXNkZSBjYWNow6knKTtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIFxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZERhdGEoKTtcbiAgY29uc3Qgc29ydGVkUHJvZ3JhbXMgPSBzb3J0UHJvZ3JhbXMoZGF0YS5wcm9ncmFtcyk7XG4gIHByb2dyYW1zQ2FjaGVVdGlscy5zZXQoY2FjaGVLZXksIHNvcnRlZFByb2dyYW1zKTtcbiAgcmV0dXJuIHNvcnRlZFByb2dyYW1zO1xufVxuXG4vLyBPYnRlbmVyIHByb2dyYW1hcyBwb3IgZXN0YWNpw7NuIChjb24gY2FjaMOpKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2dyYW1zQnlTdGF0aW9uKHN0YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxQcm9ncmFtW10+IHtcbiAgY29uc3QgY2FjaGVLZXkgPSBgcHJvZ3JhbXNfc3RhdGlvbl8ke3N0YXRpb25JZH1gO1xuICBcbiAgY29uc3QgY2FjaGVkID0gcHJvZ3JhbXNDYWNoZVV0aWxzLmdldChjYWNoZUtleSk7XG4gIGlmIChjYWNoZWQpIHtcbiAgICBjb25zb2xlLmxvZyhg8J+OryBQcm9ncmFtYXMgZGUgZXN0YWNpw7NuICR7c3RhdGlvbklkfSBzZXJ2aWRvcyBkZXNkZSBjYWNow6lgKTtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIFxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZERhdGEoKTtcbiAgY29uc3QgcHJvZ3JhbXMgPSBkYXRhLnByb2dyYW1zLmZpbHRlcihwID0+IHAuc3RhdGlvbl9pZCA9PT0gc3RhdGlvbklkKTtcbiAgY29uc3Qgc29ydGVkUHJvZ3JhbXMgPSBzb3J0UHJvZ3JhbXMocHJvZ3JhbXMpO1xuICBwcm9ncmFtc0NhY2hlVXRpbHMuc2V0KGNhY2hlS2V5LCBzb3J0ZWRQcm9ncmFtcyk7XG4gIHJldHVybiBzb3J0ZWRQcm9ncmFtcztcbn1cblxuLy8gT2J0ZW5lciBwcm9ncmFtYSBhY3R1YWwgKGNvbiBjYWNow6kgY29ydG8pXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFByb2dyYW0oc3RhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPFByb2dyYW0gfCBudWxsPiB7XG4gIC8vIFZlcmlmaWNhciBjYWNow6kgcHJpbWVyb1xuICBjb25zdCBjYWNoZWQgPSBjdXJyZW50UHJvZ3JhbUNhY2hlVXRpbHMuZ2V0KHN0YXRpb25JZCk7XG4gIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnNvbGUubG9nKGDwn46vIFByb2dyYW1hIGFjdHVhbCBkZSAke3N0YXRpb25JZH0gc2VydmlkbyBkZXNkZSBjYWNow6lgKTtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIFxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZERhdGEoKTtcbiAgXG4gIC8vIE9idGVuZXIgaG9yYSBkZSBQZXLDuiAoVVRDLTUpXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHV0YyA9IG5vdy5nZXRUaW1lKCkgKyAobm93LmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCk7XG4gIGNvbnN0IHBlcnVUaW1lID0gbmV3IERhdGUodXRjICsgKDM2MDAwMDAgKiAtNSkpO1xuICBcbiAgY29uc3QgY3VycmVudEhvdXIgPSBwZXJ1VGltZS5nZXRIb3VycygpO1xuICBjb25zdCBjdXJyZW50TWludXRlID0gcGVydVRpbWUuZ2V0TWludXRlcygpO1xuICBjb25zdCBjdXJyZW50VGltZU1pbnV0ZXMgPSBjdXJyZW50SG91ciAqIDYwICsgY3VycmVudE1pbnV0ZTsgLy8gTWludXRvcyBkZXNkZSBtZWRpYW5vY2hlXG4gIGNvbnN0IGN1cnJlbnREYXkgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pw6lyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU8OhYmFkbyddW3BlcnVUaW1lLmdldERheSgpXTtcbiAgXG4gIGNvbnN0IHN0YXRpb25Qcm9ncmFtcyA9IGRhdGEucHJvZ3JhbXMuZmlsdGVyKHAgPT4gcC5zdGF0aW9uX2lkID09PSBzdGF0aW9uSWQpO1xuICBcbiAgZm9yIChjb25zdCBwcm9ncmFtIG9mIHN0YXRpb25Qcm9ncmFtcykge1xuICAgIGlmICghcHJvZ3JhbS5kYXlzLmluY2x1ZGVzKGN1cnJlbnREYXkpKSBjb250aW51ZTtcbiAgICBcbiAgICAvLyBDb252ZXJ0aXIgdGllbXBvcyBhIG1pbnV0b3MgZGVzZGUgbWVkaWFub2NoZVxuICAgIGNvbnN0IFtzdGFydEhvdXIsIHN0YXJ0TWluXSA9IHByb2dyYW0uc3RhcnRfdGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgIGNvbnN0IFtlbmRIb3VyLCBlbmRNaW5dID0gcHJvZ3JhbS5lbmRfdGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgIFxuICAgIGNvbnN0IHN0YXJ0TWludXRlcyA9IHN0YXJ0SG91ciAqIDYwICsgc3RhcnRNaW47XG4gICAgbGV0IGVuZE1pbnV0ZXMgPSBlbmRIb3VyICogNjAgKyBlbmRNaW47XG4gICAgXG4gICAgLy8gU2kgZWwgcHJvZ3JhbWEgdGVybWluYSBhIGxhcyAwMDowMCwgc2lnbmlmaWNhIHF1ZSB0ZXJtaW5hIGEgbWVkaWFub2NoZSAoMTQ0MCBtaW51dG9zKVxuICAgIGlmIChlbmRIb3VyID09PSAwICYmIGVuZE1pbiA9PT0gMCAmJiBzdGFydEhvdXIgPj0gMTIpIHtcbiAgICAgIGVuZE1pbnV0ZXMgPSAyNCAqIDYwOyAvLyAxNDQwIG1pbnV0b3MgKG1lZGlhbm9jaGUpXG4gICAgfVxuICAgIFxuICAgIC8vIENhc28gMTogUHJvZ3JhbWEgbm9ybWFsIChubyBjcnV6YSBtZWRpYW5vY2hlKVxuICAgIGlmIChzdGFydE1pbnV0ZXMgPCBlbmRNaW51dGVzKSB7XG4gICAgICBpZiAoY3VycmVudFRpbWVNaW51dGVzID49IHN0YXJ0TWludXRlcyAmJiBjdXJyZW50VGltZU1pbnV0ZXMgPCBlbmRNaW51dGVzKSB7XG4gICAgICAgIGN1cnJlbnRQcm9ncmFtQ2FjaGVVdGlscy5zZXQoc3RhdGlvbklkLCBwcm9ncmFtKTtcbiAgICAgICAgY29uc29sZS5sb2coYPCfkr4gUHJvZ3JhbWEgYWN0dWFsIGRlICR7c3RhdGlvbklkfSBjYWNoZWFkb2ApO1xuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FzbyAyOiBQcm9ncmFtYSBxdWUgY3J1emEgbGEgbWVkaWFub2NoZSAoZWo6IDIyOjAwIC0gMDI6MDApXG4gICAgZWxzZSBpZiAoc3RhcnRNaW51dGVzID4gZW5kTWludXRlcykge1xuICAgICAgLy8gU2kgZXN0YW1vcyBkZXNwdcOpcyBkZWwgaW5pY2lvIE8gYW50ZXMgZGVsIGZpblxuICAgICAgaWYgKGN1cnJlbnRUaW1lTWludXRlcyA+PSBzdGFydE1pbnV0ZXMgfHwgY3VycmVudFRpbWVNaW51dGVzIDwgZW5kTWludXRlcykge1xuICAgICAgICBjdXJyZW50UHJvZ3JhbUNhY2hlVXRpbHMuc2V0KHN0YXRpb25JZCwgcHJvZ3JhbSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5K+IFByb2dyYW1hIGFjdHVhbCBkZSAke3N0YXRpb25JZH0gY2FjaGVhZG9gKTtcbiAgICAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgICB9XG4gICAgfVxuICAgIC8vIENhc28gMzogUHJvZ3JhbWEgZGUgMjQgaG9yYXMgKHN0YXJ0ID0gZW5kKVxuICAgIGVsc2UgaWYgKHN0YXJ0TWludXRlcyA9PT0gZW5kTWludXRlcykge1xuICAgICAgY3VycmVudFByb2dyYW1DYWNoZVV0aWxzLnNldChzdGF0aW9uSWQsIHByb2dyYW0pO1xuICAgICAgY29uc29sZS5sb2coYPCfkr4gUHJvZ3JhbWEgYWN0dWFsIGRlICR7c3RhdGlvbklkfSBjYWNoZWFkb2ApO1xuICAgICAgcmV0dXJuIHByb2dyYW07IC8vIFNpZW1wcmUgYWN0aXZvXG4gICAgfVxuICB9XG4gIFxuICAvLyBTaSBubyBlbmNvbnRyYW1vcyBwcm9ncmFtYSBwYXJhIGVsIGTDrWEgYWN0dWFsLCBidXNjYXIgZWwgcHJvZ3JhbWEgZGVsIGTDrWEgYW50ZXJpb3IgcXVlIGNydXphIG1lZGlhbm9jaGVcbiAgaWYgKGN1cnJlbnRUaW1lTWludXRlcyA8IDM2MCkgeyAvLyBTaSBlcyBhbnRlcyBkZSBsYXMgNiBBTVxuICAgIGNvbnN0IHllc3RlcmRheUluZGV4ID0gcGVydVRpbWUuZ2V0RGF5KCkgPT09IDAgPyA2IDogcGVydVRpbWUuZ2V0RGF5KCkgLSAxO1xuICAgIGNvbnN0IHllc3RlcmRheU5hbWUgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pw6lyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU8OhYmFkbyddW3llc3RlcmRheUluZGV4XTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHByb2dyYW0gb2Ygc3RhdGlvblByb2dyYW1zKSB7XG4gICAgICBpZiAoIXByb2dyYW0uZGF5cy5pbmNsdWRlcyh5ZXN0ZXJkYXlOYW1lKSkgY29udGludWU7XG4gICAgICBcbiAgICAgIGNvbnN0IFtzdGFydEhvdXIsIHN0YXJ0TWluXSA9IHByb2dyYW0uc3RhcnRfdGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgY29uc3QgW2VuZEhvdXIsIGVuZE1pbl0gPSBwcm9ncmFtLmVuZF90aW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgICBcbiAgICAgIC8vIFNvbG8gcmV2aXNhciBwcm9ncmFtYXMgcXVlIGVtcGllemFuIHRhcmRlIChkZXNwdcOpcyBkZSBsYXMgMjA6MDApXG4gICAgICBpZiAoc3RhcnRIb3VyID49IDIwKSB7XG4gICAgICAgIGNvbnN0IGVuZE1pbnV0ZXMgPSBlbmRIb3VyICogNjAgKyBlbmRNaW47XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBlbCBwcm9ncmFtYSBkZWwgZMOtYSBhbnRlcmlvciBjcnV6YSBhIGhveVxuICAgICAgICBpZiAoZW5kSG91ciA8IDEyICYmIGN1cnJlbnRUaW1lTWludXRlcyA8IGVuZE1pbnV0ZXMpIHtcbiAgICAgICAgICBjdXJyZW50UHJvZ3JhbUNhY2hlVXRpbHMuc2V0KHN0YXRpb25JZCwgcHJvZ3JhbSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCfkr4gUHJvZ3JhbWEgYWN0dWFsIGRlICR7c3RhdGlvbklkfSBjYWNoZWFkb2ApO1xuICAgICAgICAgIHJldHVybiBwcm9ncmFtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBDYWNoZWFyIG51bGwgdGFtYmnDqW4gcGFyYSBldml0YXIgYsO6c3F1ZWRhcyByZXBldGlkYXNcbiAgY3VycmVudFByb2dyYW1DYWNoZVV0aWxzLnNldChzdGF0aW9uSWQsIG51bGwpO1xuICBjb25zb2xlLmxvZyhg8J+SviBTaW4gcHJvZ3JhbWEgYWN0dWFsIHBhcmEgJHtzdGF0aW9uSWR9IC0gY2FjaGVhZG8gY29tbyBudWxsYCk7XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBDcmVhciBwcm9ncmFtYVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0ocHJvZ3JhbTogT21pdDxQcm9ncmFtLCAnaWQnPik6IFByb21pc2U8UHJvZ3JhbT4ge1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZERhdGEoKTtcbiAgY29uc3QgbmV3UHJvZ3JhbTogUHJvZ3JhbSA9IHtcbiAgICAuLi5wcm9ncmFtLFxuICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKClcbiAgfTtcbiAgXG4gIC8vIEFncmVnYXIgZWwgbnVldm8gcHJvZ3JhbWFcbiAgZGF0YS5wcm9ncmFtcy5wdXNoKG5ld1Byb2dyYW0pO1xuICBcbiAgLy8gT3JkZW5hciBwcm9ncmFtYXMgYW50ZXMgZGUgZ3VhcmRhclxuICBkYXRhLnByb2dyYW1zID0gc29ydFByb2dyYW1zKGRhdGEucHJvZ3JhbXMpO1xuICBcbiAgYXdhaXQgd3JpdGVEYXRhKGRhdGEpO1xuICBcbiAgLy8gSW52YWxpZGFyIGNhY2jDqXMgZXNwZWPDrWZpY29zXG4gIHByb2dyYW1zQ2FjaGVVdGlscy5kZWwoJ2FsbF9wcm9ncmFtcycpO1xuICBwcm9ncmFtc0NhY2hlVXRpbHMuZGVsKGBwcm9ncmFtc19zdGF0aW9uXyR7cHJvZ3JhbS5zdGF0aW9uX2lkfWApO1xuICBjdXJyZW50UHJvZ3JhbUNhY2hlVXRpbHMuZGVsKHByb2dyYW0uc3RhdGlvbl9pZCk7XG4gIFxuICByZXR1cm4gbmV3UHJvZ3JhbTtcbn1cblxuLy8gQWN0dWFsaXphciBwcm9ncmFtYVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2dyYW0oaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxQcm9ncmFtPik6IFByb21pc2U8UHJvZ3JhbT4ge1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZERhdGEoKTtcbiAgY29uc3QgaW5kZXggPSBkYXRhLnByb2dyYW1zLmZpbmRJbmRleChwID0+IHAuaWQgPT09IGlkKTtcbiAgaWYgKGluZGV4ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdQcm9ncmFtYSBubyBlbmNvbnRyYWRvJyk7XG4gIFxuICBjb25zdCBvbGRQcm9ncmFtID0gZGF0YS5wcm9ncmFtc1tpbmRleF07XG4gIGRhdGEucHJvZ3JhbXNbaW5kZXhdID0geyAuLi5vbGRQcm9ncmFtLCAuLi51cGRhdGVzIH07XG4gIFxuICAvLyBPcmRlbmFyIHByb2dyYW1hcyBhbnRlcyBkZSBndWFyZGFyXG4gIGRhdGEucHJvZ3JhbXMgPSBzb3J0UHJvZ3JhbXMoZGF0YS5wcm9ncmFtcyk7XG4gIFxuICBhd2FpdCB3cml0ZURhdGEoZGF0YSk7XG4gIFxuICAvLyBJbnZhbGlkYXIgY2FjaMOpcyBlc3BlY8OtZmljb3NcbiAgcHJvZ3JhbXNDYWNoZVV0aWxzLmRlbCgnYWxsX3Byb2dyYW1zJyk7XG4gIHByb2dyYW1zQ2FjaGVVdGlscy5kZWwoYHByb2dyYW1zX3N0YXRpb25fJHtvbGRQcm9ncmFtLnN0YXRpb25faWR9YCk7XG4gIGN1cnJlbnRQcm9ncmFtQ2FjaGVVdGlscy5kZWwob2xkUHJvZ3JhbS5zdGF0aW9uX2lkKTtcbiAgXG4gIC8vIFNpIGNhbWJpw7MgbGEgZXN0YWNpw7NuLCBpbnZhbGlkYXIgdGFtYmnDqW4gbGEgbnVldmFcbiAgaWYgKHVwZGF0ZXMuc3RhdGlvbl9pZCAmJiB1cGRhdGVzLnN0YXRpb25faWQgIT09IG9sZFByb2dyYW0uc3RhdGlvbl9pZCkge1xuICAgIHByb2dyYW1zQ2FjaGVVdGlscy5kZWwoYHByb2dyYW1zX3N0YXRpb25fJHt1cGRhdGVzLnN0YXRpb25faWR9YCk7XG4gICAgY3VycmVudFByb2dyYW1DYWNoZVV0aWxzLmRlbCh1cGRhdGVzLnN0YXRpb25faWQpO1xuICB9XG4gIFxuICByZXR1cm4gZGF0YS5wcm9ncmFtc1tpbmRleF07XG59XG5cbi8vIEVsaW1pbmFyIHByb2dyYW1hXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUHJvZ3JhbShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZWFkRGF0YSgpO1xuICBjb25zdCBwcm9ncmFtID0gZGF0YS5wcm9ncmFtcy5maW5kKHAgPT4gcC5pZCA9PT0gaWQpO1xuICBpZiAoIXByb2dyYW0pIHRocm93IG5ldyBFcnJvcignUHJvZ3JhbWEgbm8gZW5jb250cmFkbycpO1xuICBcbiAgZGF0YS5wcm9ncmFtcyA9IGRhdGEucHJvZ3JhbXMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gaWQpO1xuICBhd2FpdCB3cml0ZURhdGEoZGF0YSk7XG4gIFxuICAvLyBJbnZhbGlkYXIgY2FjaMOpcyBlc3BlY8OtZmljb3NcbiAgcHJvZ3JhbXNDYWNoZVV0aWxzLmRlbCgnYWxsX3Byb2dyYW1zJyk7XG4gIHByb2dyYW1zQ2FjaGVVdGlscy5kZWwoYHByb2dyYW1zX3N0YXRpb25fJHtwcm9ncmFtLnN0YXRpb25faWR9YCk7XG4gIGN1cnJlbnRQcm9ncmFtQ2FjaGVVdGlscy5kZWwocHJvZ3JhbS5zdGF0aW9uX2lkKTtcbn1cblxuLy8gQ3JlYXIgZXN0YWNpw7NuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU3RhdGlvbihzdGF0aW9uRGF0YTogUGFydGlhbDxTdGF0aW9uPik6IFByb21pc2U8U3RhdGlvbj4ge1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZERhdGEoKTtcbiAgY29uc3QgbmV3U3RhdGlvbjogU3RhdGlvbiA9IHtcbiAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgIG5hbWU6IHN0YXRpb25EYXRhLm5hbWUgfHwgJycsXG4gICAgdXJsOiBzdGF0aW9uRGF0YS51cmwgfHwgJycsXG4gICAgaW1hZ2U6IHN0YXRpb25EYXRhLmltYWdlLFxuICAgIGZyZXF1ZW5jeTogc3RhdGlvbkRhdGEuZnJlcXVlbmN5LFxuICAgIGNpdHk6IHN0YXRpb25EYXRhLmNpdHksXG4gICAgZGVzY3JpcHRpb246IHN0YXRpb25EYXRhLmRlc2NyaXB0aW9uXG4gIH07XG4gIGRhdGEuc3RhdGlvbnMucHVzaChuZXdTdGF0aW9uKTtcbiAgYXdhaXQgd3JpdGVEYXRhKGRhdGEpO1xuICBcbiAgLy8gSW52YWxpZGFyIGNhY2jDqSBkZSBlc3RhY2lvbmVzXG4gIHN0YXRpb25zQ2FjaGVVdGlscy5kZWwoJ2FsbF9zdGF0aW9ucycpO1xuICBcbiAgcmV0dXJuIG5ld1N0YXRpb247XG59XG5cbi8vIEFjdHVhbGl6YXIgZXN0YWNpw7NuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3RhdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFN0YXRpb24+KTogUHJvbWlzZTxTdGF0aW9uPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZWFkRGF0YSgpO1xuICBjb25zdCBpbmRleCA9IGRhdGEuc3RhdGlvbnMuZmluZEluZGV4KHMgPT4gcy5pZCA9PT0gaWQpO1xuICBpZiAoaW5kZXggPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ0VzdGFjacOzbiBubyBlbmNvbnRyYWRhJyk7XG4gIFxuICBkYXRhLnN0YXRpb25zW2luZGV4XSA9IHsgLi4uZGF0YS5zdGF0aW9uc1tpbmRleF0sIC4uLnVwZGF0ZXMgfTtcbiAgYXdhaXQgd3JpdGVEYXRhKGRhdGEpO1xuICBcbiAgLy8gSW52YWxpZGFyIGNhY2jDqSBkZSBlc3RhY2lvbmVzXG4gIHN0YXRpb25zQ2FjaGVVdGlscy5kZWwoJ2FsbF9zdGF0aW9ucycpO1xuICBcbiAgcmV0dXJuIGRhdGEuc3RhdGlvbnNbaW5kZXhdO1xufVxuXG4vLyBFbGltaW5hciBlc3RhY2nDs25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVTdGF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlYWREYXRhKCk7XG4gIC8vIEVsaW1pbmFyIGxhIGVzdGFjacOzblxuICBkYXRhLnN0YXRpb25zID0gZGF0YS5zdGF0aW9ucy5maWx0ZXIocyA9PiBzLmlkICE9PSBpZCk7XG4gIC8vIEVsaW1pbmFyIHRvZG9zIGxvcyBwcm9ncmFtYXMgZGUgZXNhIGVzdGFjacOzblxuICBkYXRhLnByb2dyYW1zID0gZGF0YS5wcm9ncmFtcy5maWx0ZXIocCA9PiBwLnN0YXRpb25faWQgIT09IGlkKTtcbiAgYXdhaXQgd3JpdGVEYXRhKGRhdGEpO1xuICBcbiAgLy8gSW52YWxpZGFyIHRvZG9zIGxvcyBjYWNow6lzIHJlbGFjaW9uYWRvc1xuICBzdGF0aW9uc0NhY2hlVXRpbHMuZGVsKCdhbGxfc3RhdGlvbnMnKTtcbiAgcHJvZ3JhbXNDYWNoZVV0aWxzLmRlbCgnYWxsX3Byb2dyYW1zJyk7XG4gIHByb2dyYW1zQ2FjaGVVdGlscy5kZWwoYHByb2dyYW1zX3N0YXRpb25fJHtpZH1gKTtcbiAgY3VycmVudFByb2dyYW1DYWNoZVV0aWxzLmRlbChpZCk7XG59Il0sIm5hbWVzIjpbImZzIiwicGF0aCIsInN0YXRpb25zQ2FjaGVVdGlscyIsInByb2dyYW1zQ2FjaGVVdGlscyIsImN1cnJlbnRQcm9ncmFtQ2FjaGVVdGlscyIsIkRBVEFfRklMRSIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZmlsZUNhY2hlIiwiZGF0YSIsInRpbWVzdGFtcCIsIkZJTEVfQ0FDSEVfVFRMIiwiY29tcGFyZVRpbWVTdHJpbmdzIiwidGltZTEiLCJ0aW1lMiIsImhvdXJzMSIsIm1pbnV0ZXMxIiwic3BsaXQiLCJtYXAiLCJOdW1iZXIiLCJob3VyczIiLCJtaW51dGVzMiIsInNvcnRQcm9ncmFtcyIsInByb2dyYW1zIiwiZGF5T3JkZXIiLCJzb3J0IiwiYSIsImIiLCJmaXJzdERheUEiLCJkYXlzIiwiZmlyc3REYXlCIiwiZGF5Q29tcGFyaXNvbiIsInN0YXJ0X3RpbWUiLCJpbml0RGF0YUZpbGUiLCJhY2Nlc3MiLCJpbml0aWFsRGF0YSIsInN0YXRpb25zIiwiaWQiLCJuYW1lIiwidXJsIiwiaW1hZ2UiLCJmcmVxdWVuY3kiLCJjaXR5IiwiZGVzY3JpcHRpb24iLCJ3ZWVrZGF5UHJvZ3JhbXMiLCJob3N0IiwiZW5kX3RpbWUiLCJzYXR1cmRheVByb2dyYW1zIiwic3VuZGF5UHJvZ3JhbXMiLCJwcm9ncmFtSWQiLCJzdGF0aW9uIiwicHJvZ3JhbSIsInB1c2giLCJ0b1N0cmluZyIsInN0YXRpb25faWQiLCJ3cml0ZUZpbGUiLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInJlYWREYXRhIiwibm93IiwiRGF0ZSIsInJlYWRGaWxlIiwicGFyc2VkIiwicGFyc2UiLCJ3cml0ZURhdGEiLCJmbHVzaCIsImdldFN0YXRpb25zIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJnZXQiLCJzZXQiLCJnZXRQcm9ncmFtcyIsInNvcnRlZFByb2dyYW1zIiwiZ2V0UHJvZ3JhbXNCeVN0YXRpb24iLCJzdGF0aW9uSWQiLCJmaWx0ZXIiLCJwIiwiZ2V0Q3VycmVudFByb2dyYW0iLCJ1bmRlZmluZWQiLCJ1dGMiLCJnZXRUaW1lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJwZXJ1VGltZSIsImN1cnJlbnRIb3VyIiwiZ2V0SG91cnMiLCJjdXJyZW50TWludXRlIiwiZ2V0TWludXRlcyIsImN1cnJlbnRUaW1lTWludXRlcyIsImN1cnJlbnREYXkiLCJnZXREYXkiLCJzdGF0aW9uUHJvZ3JhbXMiLCJpbmNsdWRlcyIsInN0YXJ0SG91ciIsInN0YXJ0TWluIiwiZW5kSG91ciIsImVuZE1pbiIsInN0YXJ0TWludXRlcyIsImVuZE1pbnV0ZXMiLCJ5ZXN0ZXJkYXlJbmRleCIsInllc3RlcmRheU5hbWUiLCJjcmVhdGVQcm9ncmFtIiwibmV3UHJvZ3JhbSIsImRlbCIsInVwZGF0ZVByb2dyYW0iLCJ1cGRhdGVzIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJFcnJvciIsIm9sZFByb2dyYW0iLCJkZWxldGVQcm9ncmFtIiwiZmluZCIsImNyZWF0ZVN0YXRpb24iLCJzdGF0aW9uRGF0YSIsIm5ld1N0YXRpb24iLCJ1cGRhdGVTdGF0aW9uIiwicyIsImRlbGV0ZVN0YXRpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/dataManager.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rateLimiter.ts":
/*!********************************!*\
  !*** ./src/lib/rateLimiter.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiRateLimiter: () => (/* binding */ apiRateLimiter),\n/* harmony export */   uploadRateLimiter: () => (/* binding */ uploadRateLimiter)\n/* harmony export */ });\n// src/lib/rateLimiter.ts\nclass RateLimiter {\n    constructor(windowMs = 60000, maxRequests = 100){\n        this.store = {};\n        this.windowMs = windowMs;\n        this.maxRequests = maxRequests;\n        // Limpiar IPs antiguas cada minuto\n        setInterval(()=>this.cleanup(), 60000);\n    }\n    cleanup() {\n        const now = Date.now();\n        Object.keys(this.store).forEach((key)=>{\n            if (this.store[key].resetTime < now) {\n                delete this.store[key];\n            }\n        });\n    }\n    getClientIdentifier(request) {\n        // Obtener IP del cliente\n        const forwarded = request.headers.get('x-forwarded-for');\n        const ip = forwarded ? forwarded.split(',')[0] : 'unknown';\n        // Combinar con user-agent para mejor identificación\n        const userAgent = request.headers.get('user-agent') || 'unknown';\n        return `${ip}:${userAgent}`;\n    }\n    isRateLimited(request) {\n        const clientId = this.getClientIdentifier(request);\n        const now = Date.now();\n        if (!this.store[clientId]) {\n            this.store[clientId] = {\n                count: 1,\n                resetTime: now + this.windowMs\n            };\n            return false;\n        }\n        const client = this.store[clientId];\n        if (client.resetTime < now) {\n            client.count = 1;\n            client.resetTime = now + this.windowMs;\n            return false;\n        }\n        client.count++;\n        return client.count > this.maxRequests;\n    }\n    getRemainingRequests(request) {\n        const clientId = this.getClientIdentifier(request);\n        const client = this.store[clientId];\n        if (!client) return this.maxRequests;\n        const now = Date.now();\n        if (client.resetTime < now) return this.maxRequests;\n        return Math.max(0, this.maxRequests - client.count);\n    }\n}\n// Crear instancias para diferentes endpoints\nconst apiRateLimiter = new RateLimiter(60000, 100); // 100 requests por minuto\nconst uploadRateLimiter = new RateLimiter(300000, 10); // 10 uploads por 5 minutos\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhdGVMaW1pdGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEseUJBQXlCO0FBVXpCLE1BQU1BO0lBS0pDLFlBQVlDLFdBQW1CLEtBQUssRUFBRUMsY0FBc0IsR0FBRyxDQUFFO2FBSnpEQyxRQUF3QixDQUFDO1FBSy9CLElBQUksQ0FBQ0YsUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLFdBQVcsR0FBR0E7UUFFbkIsbUNBQW1DO1FBQ25DRSxZQUFZLElBQU0sSUFBSSxDQUFDQyxPQUFPLElBQUk7SUFDcEM7SUFFUUEsVUFBVTtRQUNoQixNQUFNQyxNQUFNQyxLQUFLRCxHQUFHO1FBQ3BCRSxPQUFPQyxJQUFJLENBQUMsSUFBSSxDQUFDTixLQUFLLEVBQUVPLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDOUIsSUFBSSxJQUFJLENBQUNSLEtBQUssQ0FBQ1EsSUFBSSxDQUFDQyxTQUFTLEdBQUdOLEtBQUs7Z0JBQ25DLE9BQU8sSUFBSSxDQUFDSCxLQUFLLENBQUNRLElBQUk7WUFDeEI7UUFDRjtJQUNGO0lBRVFFLG9CQUFvQkMsT0FBb0IsRUFBVTtRQUN4RCx5QkFBeUI7UUFDekIsTUFBTUMsWUFBWUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDdEMsTUFBTUMsS0FBS0gsWUFBWUEsVUFBVUksS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUc7UUFFakQsb0RBQW9EO1FBQ3BELE1BQU1DLFlBQVlOLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQjtRQUN2RCxPQUFPLEdBQUdDLEdBQUcsQ0FBQyxFQUFFRSxXQUFXO0lBQzdCO0lBRU9DLGNBQWNQLE9BQW9CLEVBQVc7UUFDbEQsTUFBTVEsV0FBVyxJQUFJLENBQUNULG1CQUFtQixDQUFDQztRQUMxQyxNQUFNUixNQUFNQyxLQUFLRCxHQUFHO1FBRXBCLElBQUksQ0FBQyxJQUFJLENBQUNILEtBQUssQ0FBQ21CLFNBQVMsRUFBRTtZQUN6QixJQUFJLENBQUNuQixLQUFLLENBQUNtQixTQUFTLEdBQUc7Z0JBQ3JCQyxPQUFPO2dCQUNQWCxXQUFXTixNQUFNLElBQUksQ0FBQ0wsUUFBUTtZQUNoQztZQUNBLE9BQU87UUFDVDtRQUVBLE1BQU11QixTQUFTLElBQUksQ0FBQ3JCLEtBQUssQ0FBQ21CLFNBQVM7UUFFbkMsSUFBSUUsT0FBT1osU0FBUyxHQUFHTixLQUFLO1lBQzFCa0IsT0FBT0QsS0FBSyxHQUFHO1lBQ2ZDLE9BQU9aLFNBQVMsR0FBR04sTUFBTSxJQUFJLENBQUNMLFFBQVE7WUFDdEMsT0FBTztRQUNUO1FBRUF1QixPQUFPRCxLQUFLO1FBQ1osT0FBT0MsT0FBT0QsS0FBSyxHQUFHLElBQUksQ0FBQ3JCLFdBQVc7SUFDeEM7SUFFT3VCLHFCQUFxQlgsT0FBb0IsRUFBVTtRQUN4RCxNQUFNUSxXQUFXLElBQUksQ0FBQ1QsbUJBQW1CLENBQUNDO1FBQzFDLE1BQU1VLFNBQVMsSUFBSSxDQUFDckIsS0FBSyxDQUFDbUIsU0FBUztRQUVuQyxJQUFJLENBQUNFLFFBQVEsT0FBTyxJQUFJLENBQUN0QixXQUFXO1FBRXBDLE1BQU1JLE1BQU1DLEtBQUtELEdBQUc7UUFDcEIsSUFBSWtCLE9BQU9aLFNBQVMsR0FBR04sS0FBSyxPQUFPLElBQUksQ0FBQ0osV0FBVztRQUVuRCxPQUFPd0IsS0FBS0MsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDekIsV0FBVyxHQUFHc0IsT0FBT0QsS0FBSztJQUNwRDtBQUNGO0FBRUEsNkNBQTZDO0FBQ3RDLE1BQU1LLGlCQUFpQixJQUFJN0IsWUFBWSxPQUFPLEtBQUssQ0FBQywwQkFBMEI7QUFDOUUsTUFBTThCLG9CQUFvQixJQUFJOUIsWUFBWSxRQUFRLElBQUksQ0FBQywyQkFBMkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVVNVQVJJT1xcRGVza3RvcFxcQVBQLUVYSVRPU0EyMDI2XFxzcmNcXGxpYlxccmF0ZUxpbWl0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9yYXRlTGltaXRlci50c1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbmludGVyZmFjZSBSYXRlTGltaXRTdG9yZSB7XG4gIFtrZXk6IHN0cmluZ106IHtcbiAgICBjb3VudDogbnVtYmVyO1xuICAgIHJlc2V0VGltZTogbnVtYmVyO1xuICB9O1xufVxuXG5jbGFzcyBSYXRlTGltaXRlciB7XG4gIHByaXZhdGUgc3RvcmU6IFJhdGVMaW1pdFN0b3JlID0ge307XG4gIHByaXZhdGUgcmVhZG9ubHkgd2luZG93TXM6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhSZXF1ZXN0czogbnVtYmVyO1xuICBcbiAgY29uc3RydWN0b3Iod2luZG93TXM6IG51bWJlciA9IDYwMDAwLCBtYXhSZXF1ZXN0czogbnVtYmVyID0gMTAwKSB7XG4gICAgdGhpcy53aW5kb3dNcyA9IHdpbmRvd01zO1xuICAgIHRoaXMubWF4UmVxdWVzdHMgPSBtYXhSZXF1ZXN0cztcbiAgICBcbiAgICAvLyBMaW1waWFyIElQcyBhbnRpZ3VhcyBjYWRhIG1pbnV0b1xuICAgIHNldEludGVydmFsKCgpID0+IHRoaXMuY2xlYW51cCgpLCA2MDAwMCk7XG4gIH1cbiAgXG4gIHByaXZhdGUgY2xlYW51cCgpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIE9iamVjdC5rZXlzKHRoaXMuc3RvcmUpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmICh0aGlzLnN0b3JlW2tleV0ucmVzZXRUaW1lIDwgbm93KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JlW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgZ2V0Q2xpZW50SWRlbnRpZmllcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB7XG4gICAgLy8gT2J0ZW5lciBJUCBkZWwgY2xpZW50ZVxuICAgIGNvbnN0IGZvcndhcmRlZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpO1xuICAgIGNvbnN0IGlwID0gZm9yd2FyZGVkID8gZm9yd2FyZGVkLnNwbGl0KCcsJylbMF0gOiAndW5rbm93bic7XG4gICAgXG4gICAgLy8gQ29tYmluYXIgY29uIHVzZXItYWdlbnQgcGFyYSBtZWpvciBpZGVudGlmaWNhY2nDs25cbiAgICBjb25zdCB1c2VyQWdlbnQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd1c2VyLWFnZW50JykgfHwgJ3Vua25vd24nO1xuICAgIHJldHVybiBgJHtpcH06JHt1c2VyQWdlbnR9YDtcbiAgfVxuICBcbiAgcHVibGljIGlzUmF0ZUxpbWl0ZWQocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBib29sZWFuIHtcbiAgICBjb25zdCBjbGllbnRJZCA9IHRoaXMuZ2V0Q2xpZW50SWRlbnRpZmllcihyZXF1ZXN0KTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIGlmICghdGhpcy5zdG9yZVtjbGllbnRJZF0pIHtcbiAgICAgIHRoaXMuc3RvcmVbY2xpZW50SWRdID0ge1xuICAgICAgICBjb3VudDogMSxcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB0aGlzLndpbmRvd01zXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjbGllbnQgPSB0aGlzLnN0b3JlW2NsaWVudElkXTtcbiAgICBcbiAgICBpZiAoY2xpZW50LnJlc2V0VGltZSA8IG5vdykge1xuICAgICAgY2xpZW50LmNvdW50ID0gMTtcbiAgICAgIGNsaWVudC5yZXNldFRpbWUgPSBub3cgKyB0aGlzLndpbmRvd01zO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjbGllbnQuY291bnQrKztcbiAgICByZXR1cm4gY2xpZW50LmNvdW50ID4gdGhpcy5tYXhSZXF1ZXN0cztcbiAgfVxuICBcbiAgcHVibGljIGdldFJlbWFpbmluZ1JlcXVlc3RzKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogbnVtYmVyIHtcbiAgICBjb25zdCBjbGllbnRJZCA9IHRoaXMuZ2V0Q2xpZW50SWRlbnRpZmllcihyZXF1ZXN0KTtcbiAgICBjb25zdCBjbGllbnQgPSB0aGlzLnN0b3JlW2NsaWVudElkXTtcbiAgICBcbiAgICBpZiAoIWNsaWVudCkgcmV0dXJuIHRoaXMubWF4UmVxdWVzdHM7XG4gICAgXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoY2xpZW50LnJlc2V0VGltZSA8IG5vdykgcmV0dXJuIHRoaXMubWF4UmVxdWVzdHM7XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHRoaXMubWF4UmVxdWVzdHMgLSBjbGllbnQuY291bnQpO1xuICB9XG59XG5cbi8vIENyZWFyIGluc3RhbmNpYXMgcGFyYSBkaWZlcmVudGVzIGVuZHBvaW50c1xuZXhwb3J0IGNvbnN0IGFwaVJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDYwMDAwLCAxMDApOyAvLyAxMDAgcmVxdWVzdHMgcG9yIG1pbnV0b1xuZXhwb3J0IGNvbnN0IHVwbG9hZFJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDMwMDAwMCwgMTApOyAvLyAxMCB1cGxvYWRzIHBvciA1IG1pbnV0b3MiXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXIiLCJjb25zdHJ1Y3RvciIsIndpbmRvd01zIiwibWF4UmVxdWVzdHMiLCJzdG9yZSIsInNldEludGVydmFsIiwiY2xlYW51cCIsIm5vdyIsIkRhdGUiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInJlc2V0VGltZSIsImdldENsaWVudElkZW50aWZpZXIiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsImlwIiwic3BsaXQiLCJ1c2VyQWdlbnQiLCJpc1JhdGVMaW1pdGVkIiwiY2xpZW50SWQiLCJjb3VudCIsImNsaWVudCIsImdldFJlbWFpbmluZ1JlcXVlc3RzIiwiTWF0aCIsIm1heCIsImFwaVJhdGVMaW1pdGVyIiwidXBsb2FkUmF0ZUxpbWl0ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rateLimiter.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/node-cache","vendor-chunks/clone"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcurrent-program%2Froute&page=%2Fapi%2Fcurrent-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcurrent-program%2Froute.ts&appDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSUARIO%5CDesktop%5CAPP-EXITOSA2026&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();